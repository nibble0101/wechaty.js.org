<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="4.2.0">Jekyll</generator><link href="https://wechaty.js.org/feed.xml" rel="self" type="application/atom+xml" /><link href="https://wechaty.js.org/" rel="alternate" type="text/html" /><updated>2021-04-22T10:14:49+00:00</updated><id>https://wechaty.js.org/feed.xml</id><title type="html">Wechaty</title><subtitle>Conversational RPA SDK for Chatbot Makers</subtitle><entry><title type="html">AI ChatBot Creation Campåˆ›æ„èµ›é‡ç£…æ¥è¢­ï¼</title><link href="https://wechaty.js.org/2021/04/22/wechaty-with-paddlepaddle/" rel="alternate" type="text/html" title="AI ChatBot Creation Campåˆ›æ„èµ›é‡ç£…æ¥è¢­ï¼" /><published>2021-04-22T00:00:00+00:00</published><updated>2021-04-22T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/22/wechaty-with-paddlepaddle</id><content type="html" xml:base="https://wechaty.js.org/2021/04/22/wechaty-with-paddlepaddle/">&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/wj-Mcat&quot;&gt;wj-mcat&lt;/a&gt; è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•å·¥ç¨‹å¸ˆï¼Œpython-wechaty ä½œè€…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;AI ChatBot Creation Campï¼Œåˆ›æ„èµ›é‡ç£…æ¥è¢­ï¼ æ¯”èµ›æ—¶é—´ï¼š2021/04/12 - 2021/05/31&lt;/p&gt;

&lt;p&gt;æ¬¢è¿æ‰€æœ‰å…³äºChatBotçš„åˆ›æ„é¡¹ç›®ï¼åªè¦ä½ çš„é¡¹ç›®å¤Ÿä¼˜ç§€ï¼Œå®˜æ–¹é€ä½ å‡ºé“! æ¯”èµ›åœ°å€ï¼š&lt;a href=&quot;https://aistudio.baidu.com/aistudio/competition/detail/79&quot;&gt;AI ChatBot åˆ›æ„èµ›&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ¯”èµ›ä»‹ç»&quot;&gt;æ¯”èµ›ä»‹ç»&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;ğŸ¤”äººå·¥æ™ºèƒ½æ—¶ä»£çš„ChatBotéœ€è¦å…·å¤‡å“ªäº›èƒ½åŠ›ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;âœ¨å®ƒæ˜¯æ™ºèƒ½å°ç®¡å®¶ï¼Œå¸®ä½ æ•´ç†æ‰€æœ‰â€œç äº†å°±ç­‰äºçœ‹äº†â€çš„èµ„æ–™ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;âœ¨å®ƒæ˜¯æ–—å›¾å¤§å¸ˆï¼Œåˆ†åˆ†é’Ÿå¸®ä½ på¥½å¥½å‹çš„é¬¼ç•œè¡¨æƒ…åŒ…ï¼Ÿ&lt;/li&gt;
  &lt;li&gt;âœ¨å®ƒæ˜¯æ— æƒ…çš„å¤¸äººæœºå™¨ï¼Œæ¯å¤©éƒ½èƒ½è‡ªåŠ¨ç”Ÿæˆæ–°çš„å½©è™¹å±ï¼Ÿ&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å®ç”¨çš„ã€æœ‰è¶£çš„ã€é¬¼ç•œçš„â€¦ ä¸çŸ¥å¤§ä¾ æœ‰ä½•é«˜è§ï¼Ÿå¿«æ¥ç»„é˜Ÿå®ç°å§ï¼PaddlePaddleèåˆWechatyèƒ½ spark å‡ºæ€æ ·çš„inspirationï¼Ÿ&lt;/p&gt;

&lt;p&gt;æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å…³äºChatBotçš„åˆ›æ„é¡¹ç›®ï¼åªè¦ä½ çš„é¡¹ç›®å¤Ÿä¼˜ç§€ï¼Œå®˜æ–¹é€ä½ å‡ºé“ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-with-paddlepaddle/eliza.png&quot; alt=&quot;eliza&quot; /&gt;&lt;/p&gt;

&lt;p&gt;1950å¹´ï¼Œè‰¾ä¼¦Â·éº¦å¸­æ£®Â·å›¾çµä»¥ä¸€ç¯‡åˆ’æ—¶ä»£çš„æ–‡ç« æ‰£å¼€äº†äººå·¥æ™ºèƒ½çš„å¤§é—¨ã€‚ä¸æ­¤åŒæ—¶ï¼Œæœºå™¨èƒ½å¦è®©å¤§æ‰¹äººç±»å¤±è¯¯ï¼Ÿæ€æ ·çš„æ™ºèƒ½æ‰èƒ½åŒ¹é…æ—¶ä»£å‘å±•çš„è„šæ­¥ï¼Ÿæœªæ¥çš„ä¸–ç•Œåˆè¯¥å¦‚ä½•çªç ´å›¾çµæµ‹è¯•çš„æ¡æ¢ï¼Ÿæ¥è¸µè€Œè‡³çš„é—®é¢˜è®©äººä»¬å¯¹AIå……æ»¡äº†æœŸå¾…ã€‚&lt;/p&gt;

&lt;p&gt;å¾ˆå¿«ï¼Œåœ¨1966å¹´è¯ç”ŸELIZAå°±è®©å›¾çµæµ‹è¯•æ„Ÿå—åˆ°AIçš„åŠ›é‡ã€‚è¿™æ¬¾ç”±éº»çœç†å·¥å­¦é™¢å¼€å‘çš„èŠå¤©æœºå™¨äººï¼ˆChatBotï¼‰è·å¾—äº†åª²ç¾å¿ƒç†åŒ»ç”Ÿçš„èƒ½åŠ›ï¼Œå…¶ä»¥å¤§é‡çš„å¿ƒç†å­¦è¯­å¥ä¸ºæ•°æ®è¿›è¡Œè®­ç»ƒï¼Œåœ¨ä¸ç—…äººæ²Ÿé€šæ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡å…³é”®è¯é€»è¾‘é€‰æ‹©å°†å¯¹è¯å¾€æ›´åŠ èšç„¦çš„æ–¹å‘å¼•å¯¼ï¼Œè¿›è€ŒæŒ–æ˜å¯¹è¯äººçš„çœŸå®éœ€æ±‚å’ŒåŠ¨æœºï¼Œè€Œè¿™äº›èƒ½åŠ›ä¹Ÿè®©å½“æ—¶å¾ˆå¤šäººè¯¯ä»¥ä¸ºELIZAå°±æ˜¯çœŸäººã€‚&lt;/p&gt;

&lt;p&gt;â€œæœ‰å¤šå°‘æ™ºèƒ½ï¼Œå°±æœ‰å¤šå°‘äººå·¥â€ã€‚ELIZAçš„æˆåŠŸçš„èƒŒåæ˜¯å¤§é‡äººåŠ›æˆæœ¬çš„æ³¨å…¥ï¼Œåœ¨å‰æœŸè®­ç»ƒæˆæœ¬å¢åŠ çš„åŒæ—¶ï¼Œå…¶ä¹Ÿæ›´å®¹æ˜“è®©è¢«æµ‹è¯•äººç›¸ä¿¡è‡ªå·±æ‰€é¢å¯¹çš„å°±æ˜¯ä¸€ä¸ªæœ‰è¡€æœ‰è‚‰çš„â€œå¿ƒç†åŒ»ç”Ÿâ€ã€‚ä¸è¿‡é—®é¢˜ä¹Ÿä¸€æ ·å­˜åœ¨ï¼Œé™¤äº†è®­ç»ƒæˆæœ¬è¿‡é«˜ä»¥å¤–ï¼Œ1966å¹´çš„NLPæŠ€æœ¯ä¹Ÿå¤ªè¿‡ç¨šå«©ï¼ŒELIZAæ— æ³•çœŸæ­£ç†è§£è¯æ±‡ï¼Œä¹Ÿæ— æ³•è¿›è¡Œè‡ªæˆ‘å­¦ä¹ å’Œè¿›åŒ–ã€‚&lt;/p&gt;

&lt;p&gt;æ—¶å…‰æºæŠ€æœ¯ä¸€åŒæ¨åŠ¨äº†å‘½è¿çš„è½¬è½®ï¼ŒAIå‘å±•è‡³ä»Šä¹Ÿæ—©ä¸æ˜¯æ˜”æ—¥çš„å´ä¸‹é˜¿è’™ã€‚å¦‚ä»Šï¼ŒELIZAçš„åè¾ˆä»¬æ´»è·ƒäºå„ä¸ªé¢†åŸŸï¼Œæ‰‹æœºä¸Šçš„æ™ºèƒ½åŠ©æ‰‹ï¼Œç”µå•†ç”¨çš„æ™ºèƒ½å®¢æœï¼Œå®¶åº­ç”Ÿæ´»çš„æ™ºèƒ½ç®¡å®¶ï¼Œäº¤æµç”¨çš„è¡¨æƒ…åŒ…â€¦â€¦ChatBotçš„è®­ç»ƒè¯­å¥åœ¨ç¼©çŸ­ï¼Œåœºæ™¯ä½¿ç”¨æ—¶é—´å´å»¶é•¿äº†ï¼›ChatBotå¼€å‘æˆæœ¬åœ¨å‡å°‘ï¼Œå‘æŒ¥ç©ºé—´å´å¢åŠ äº†ï¼›ChatBotçš„é—¨æ§›åœ¨é™ä½ï¼Œäººæ–‡æ¸©åº¦å´æå‡äº†ã€‚è¿™ä¸€åˆ‡çš„å˜åŒ–æ— ä¸åœ¨å‘ŠçŸ¥è¿™ä¸ªæ—¶ä»£ï¼š&lt;strong&gt;ChatBotçš„æ–°æ—¶ä»£åˆ°æ¥äº†&lt;/strong&gt;ã€‚&lt;/p&gt;

&lt;p&gt;åœ¨è¿™ä¸ªæ—¶ä»£é‡Œï¼ŒChatBotçš„ç«äº‰æ—©å·²ä¸å†å±€é™äºæŠ€æœ¯ï¼Œåˆ›æ„ä¹Ÿæ˜¾å¾—å°¤ä¸ºé‡è¦ã€‚å› æ­¤ï¼Œä¸ºäº†å‘æ˜æ›´å¤šä¼˜ç§€çš„ChatBotå¼€å‘é¡¹ç›®ï¼ŒåŸ¹å…»æ›´å¤§ä¼˜è´¨äººæ‰ï¼ŒPaddleHubæºæ‰‹å¼€æºèŠå¤©æœºå™¨äººæ¡†æ¶Wechatyå¸¦æ¥äº†ã€ŠAI ChatBotåˆ›æ„èµ›ã€‹ã€‚å¦‚æœä½ åœ¨ChatBotå¼€å‘æ–¹é¢æœ‰æƒ³æ³•ä¹Ÿæœ‰èƒ½åŠ›ï¼Œé‚£ä¹ˆæ¬¢è¿æŠ¥åå‚ä¸æœ¬æ¬¡å¤§èµ›ï¼Œä¸ºæœªæ¥è®¾è®¡ä¸€æ¬¾æ›´åŠ æ–°é¢–ã€å¯é ã€å®ç”¨çš„ChatBotã€‚è€Œå¦‚æœä½ çš„ChatBotåˆ›æ„é¡¹ç›®è¶³å¤Ÿä¼˜ç§€å¹¶è¿›å…¥äº†æœ€ç»ˆå†³èµ›ï¼Œé‚£ä¹ˆé£æ¡¨å®˜æ–¹å°†ä¼šå¸®åŠ©ä½ ç™»ä¸ŠWAVE SUMMIT 2021å³°ä¼šçš„èˆå°ï¼&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-with-paddlepaddle/completion-invite.png&quot; alt=&quot;completion-invitor&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;èµ›é¢˜ä»‹ç»&quot;&gt;èµ›é¢˜ä»‹ç»&lt;/h2&gt;

&lt;p&gt;æœ¬æ¬¡å¤§èµ›éœ€è¦æ‰€æœ‰é€‰æ‰‹ä½¿ç”¨PaddleHubå’ŒWechatyä¸¤ä¸ªå¼€æºäº§å“æ¥æ‰“é€ å±äºè‡ªå·±çš„åˆ›æ„ai ChatBotï¼Œè€Œå¤§èµ›å®˜æ–¹ä¸ºé€‰æ‰‹ä»¬æä¾›çš„ä¸ä»…æ˜¯ä¸€ä¸ªå…¨æ–°çš„AIèƒ½åŠ›å¹³å°ï¼Œä¹Ÿæ˜¯ä¸€ä¸ªèƒ½å¤Ÿä¸å„è·¯å¥½æ‰‹ä¸€è¾ƒé«˜ä¸‹çš„èˆå°ã€‚é‚£ä¹ˆè¿™ä¸¤å¤§å¼€æºäº§å“æœ‰å“ªäº›èƒ½åŠ›å‘¢ï¼Ÿ&lt;/p&gt;

&lt;h3 id=&quot;paddlehub&quot;&gt;PaddleHub&lt;/h3&gt;

&lt;p&gt;PaddleHubæ˜¯é£æ¡¨æ·±åº¦å­¦ä¹ å¹³å°ä¸‹çš„é¢„è®­ç»ƒæ¨¡å‹åº”ç”¨ç®¡ç†å·¥å…·ã€‚æ—¨åœ¨ä¸ºå¼€å‘è€…æä¾›ä¸°å¯Œçš„ã€é«˜è´¨é‡çš„ã€ç›´æ¥å¯ç”¨çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚æ— éœ€æ·±åº¦å­¦ä¹ èƒŒæ™¯ã€æ— éœ€æ•°æ®ä¸è®­ç»ƒè¿‡ç¨‹ï¼Œå¯å¿«é€Ÿä½¿ç”¨AIæ¨¡å‹ã€‚é¢„è®­ç»ƒæ¨¡å‹æ¶µç›–CVã€NLPã€Audioã€Videoä¸»æµå››å¤§å“ç±»ï¼Œæ”¯æŒä¸€é”®é¢„æµ‹ã€ä¸€é”®æœåŠ¡åŒ–éƒ¨ç½²å’Œå¿«é€Ÿè¿ç§»å­¦ä¹ ã€‚å…¨éƒ¨æ¨¡å‹å‡å·²å¼€æºå¹¶æä¾›ä¸‹è½½ï¼Œå¯ç¦»çº¿è¿è¡Œã€‚&lt;/p&gt;

&lt;p&gt;å½“ç„¶ï¼ŒPaddleHubä¸ä»…ä»…èƒ½å¤Ÿç”¨äºå¼€å‘ChatBotï¼Œåœ¨ä¹‹å‰çš„å„ç±»æ´»åŠ¨ä¸­ï¼Œå¼€å‘è€…æœ‹å‹ä¹Ÿåˆ©ç”¨è¿™ä¸€å¹³å°å¼€å‘å‡ºå¤šä¸ªä¼˜è´¨é¡¹ç›®ï¼Œæ¯”å¦‚ä¼ ç»Ÿè‰ºæœ¯çš®å½±æˆçš„å¤ç°ï¼›ä¹Ÿæœ‰äººè®©AIå¤§è¯´åœŸå‘³æƒ…æ€€ï¼Œä¸€è¾¹å°¬ä¸€è¾¹æ’©ï¼›æœ‰äººå®ç°äº†ä¸€é”®æ›¿æ¢å¤©ç©ºï¼Œäººäººéƒ½èƒ½æˆä¸ºæ–¯çš®å°”ä¼¯æ ¼ï¼›å†æˆ–è€…åˆ©ç”¨AIå¸®åŠ©ä½œç”»ï¼Œè½»æ¾æ‰“ç ´æ¬¡å…ƒå£ã€‚è€Œè¿™äº›Demoå‡åœ¨GitHubå¼€æºå¯è§ã€‚&lt;/p&gt;

&lt;p&gt;æŸ¥çœ‹ç²¾å½©Demoè¯·å‰å¾€ï¼š&lt;a href=&quot;https://github.com/PaddlePaddle/PaddleHub#visualization-demo&quot;&gt;github.com/PaddlePaddle/PaddleHub&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;wechaty&quot;&gt;Wechaty&lt;/h3&gt;

&lt;p&gt;Wechaty æ˜¯ä¸€ä¸ªå¼€æºèŠå¤©æœºå™¨äººæ¡†æ¶SDKï¼Œå…·æœ‰å¤šå¹³å°ã€å¤šè¯­è¨€å’Œå¤šæ’ä»¶çš„ç‰¹æ€§ï¼Œæ”¯æŒPython, Go, Java, Scala, .NET, PHP, Rust ç­‰å¤šè¯­è¨€ç‰ˆæœ¬ï¼Œé€šè¿‡å‡ è¡Œä»£ç å³å¯åˆ›å»ºä¸€ä¸ªèŠå¤©æœºå™¨äººã€‚ç»è¿‡5å¹´å¤šçš„å‘å±•ï¼Œç°åœ¨Wechatyå¼€æºç¤¾åŒºå·²æ‹¥æœ‰æ•°åä½Committersï¼Œç™¾ä½™ä½Contributorsï¼Œå¹¶è¢«ä¸‡åGithubå¼€å‘è€…Starã€‚ç›®å‰ï¼ŒWechatyçš„å¼€å‘è€…å·²éå¸ƒå…¨çƒå¤šä¸ªå›½å®¶å’Œåœ°åŒºï¼Œè¦†ç›–æ•°ä¸‡äººï¼Œæ˜¯å›½å†…æœ€æ´»è·ƒçš„Conversational AI Chatbot å¼€å‘è€…ç¤¾åŒºã€‚&lt;/p&gt;

&lt;p&gt;Wechatyçš„ä¼˜åŠ¿åœ¨äºå¯¹ä»£ç è´¨é‡åœ°ç®¡ç†ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨äº†Github Actionsåœ°DevOpså·¥å…·å®Œæˆäº†CI/CDå·¥ä½œæµï¼Œä»è‡ªåŠ¨åŒ–å•å…ƒæµ‹è¯•åˆ°è‡ªåŠ¨æ‰“åŒ…é›†æˆæµ‹è¯•ï¼Œä»è‡ªåŠ¨å‘å¸ƒNPMåŒ…åˆ°è‡ªåŠ¨æ„å»ºå’Œå‘å¸ƒå¯¹åº”ç‰ˆæœ¬åœ°Docker Imageï¼Œå®ç°äº†å…¨è‡ªåŠ¨åœ°ç¤¾åŒºä»£ç å‘å¸ƒï¼Œæå¤§åœ°æé«˜äº†ç¤¾åŒºåœ°ååŒæ•ˆç‡ã€‚&lt;/p&gt;

&lt;p&gt;ç›®å‰ï¼Œåœ¨Githubä¸Šå·²æœ‰åƒä½™ä¸ªå¼€æºé¡¹ç›®åŸºäºWechatyæ„å»ºäº†èŠå¤©æœºå™¨äººã€‚å¦å¤–ï¼ŒWechatyç»Ÿä¸€äº†å³æ—¶é€šè®¯è½¯ä»¶å¹³å°çš„å¯¹è¯æ¥å£ï¼Œä»…éœ€è¦ä¸€å¥—ä»£ç å³å¯è¿è¡Œåœ¨å¤šä¸ªå¹³å°ä¹‹ä¸Šï¼Œç›®å‰å·²æˆç†Ÿé«˜æ•ˆåœ°æ¨åŠ¨äº†åŒ…æ‹¬ç¤¾ç¾¤ç®¡ç†ã€æ•°æ®è¿ç»´ã€åŠå…¬ã€èµ„è®¯ã€å¹¿å‘Šã€è¥é”€ç­‰å¤šä¸ªé¢†åŸŸä¸åŒå®ç”¨åœºæ™¯çš„è½åœ°ã€‚æ¯”å¦‚OSS.Chatèƒ½å¤Ÿæ‰“é€šGithubå¼€å‘è€…ç¤¾åŒºï¼Œè®©å¼€æºç¤¾åŒºè·å¾—å³æ—¶åŠ¨æ€ï¼›YanBotè¾…åŠ©ç®¡ç†ç›¸å…³çš„å¤šä¸ªå¾®ä¿¡è®¨è®ºç¾¤The R-fMRI Journal Clubï¼Œå¹¶å¯¹ç”¨æˆ·å¯¹é¢†åŸŸå†…æ–‡çŒ®çš„è®¨è®ºå’Œç›¸å…³è„‘å½±åƒæŠ€æœ¯é—®é¢˜è¿›è¡Œæ¡¥æ¥ï¼›ä»¥åŠpython-Wechatyæ–—å›¾æœºå™¨äººèƒ½å¤Ÿä¸è”ç³»äººè¶£èŠæ–—å›¾ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-with-paddlepaddle/wechaty-structure.png&quot; alt=&quot;wechaty-structure&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;å‡ è¡Œä»£ç èåˆwechatyå’Œpaddlehub&quot;&gt;å‡ è¡Œä»£ç èåˆWechatyå’ŒPaddleHub&lt;/h3&gt;

&lt;p&gt;é€šè¿‡Wechatyçš„å®˜æ–¹æ•™ç¨‹åœ¨æœ¬åœ°æ­å»ºå¹¶è¿è¡ŒPyhtonç‰ˆæœ¬çš„Wechatyï¼Œä½¿ç”¨Paddlehubé¢„è®­ç»ƒçš„æ–‡æœ¬ç”Ÿæˆæ¨¡å‹ä¸Wechatyçš„è‡ªåŠ¨å›å¤æ¶ˆæ¯è¿›è¡Œç»“åˆï¼Œå®ç°äº†é€šè¿‡å¾®ä¿¡è¾“å…¥æ–‡å­—è¿”å›æƒ…è¯çš„åŠŸèƒ½ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-with-paddlepaddle/wechaty-paddlehub.png&quot; alt=&quot;wechaty-paddlehub&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Python 3.8 / Pip 20.1.1 / PaddleHub 2.0.4 / PaddlePaddle  2.0.2&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;å‚èµ›æ”¯æŒ&quot;&gt;å‚èµ›æ”¯æŒ&lt;/h2&gt;

&lt;p&gt;åœ¨æœ¬æ¬¡æ¯”èµ›ä¸­ï¼ŒWechatyä¸ºå‚èµ›é€‰æ‰‹å…è´¹æä¾›tokenã€‚åŒæ—¶ï¼Œç™¾åº¦å¤§è„‘AI Studioè¿˜å°†ä¸ºå‚èµ›é€‰æ‰‹å…è´¹å‘æ”¾100å°æ—¶ GPU Tesla V100ç®—åŠ›å¡ï¼Œé€‰æ‰‹æŠ¥åå³å¯åœ¨æ•°æ®ä¸‹è½½é¡µè·å¾—ç”³è¯·åœ°å€ã€‚Â Â &lt;/p&gt;

&lt;p&gt;ä¸ä»…å¦‚æ­¤ï¼Œ4æœˆ14æ—¥ æ™š8ï¼š10ï¼Œ PaddleHubå’ŒWechatyçš„å·¥ç¨‹å¸ˆå¸¦æ¥äº§å“è®²è§£åŠDemoæ¼”ç¤ºï¼Œæ‰‹æŠŠæ‰‹å¸¦ä½ ä½¿ç”¨è¿™ä¸¤æ¬¾åˆ©å™¨æ‰“é€ è‡ªå·±çš„AI Chatbotï¼&lt;/p&gt;

&lt;div style=&quot;
    position: relative;
    padding-bottom: 70%;
    padding-top:30px;
    height:0;
    overflow:hidden;
&quot;&gt;
  &lt;iframe src=&quot;//player.bilibili.com/player.html?aid=672615010&amp;amp;bvid=BV16U4y1h7dc&amp;amp;cid=324632441&amp;amp;page=1&amp;amp;high_quality=1&quot; allowfullscreen=&quot;&quot; webkitallowfullscreen=&quot;&quot; frameborder=&quot;0&quot; style=&quot;
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    &quot;&gt;
&lt;/iframe&gt;

&lt;/div&gt;

&lt;h2 id=&quot;å‚èµ›å¥–å“&quot;&gt;å‚èµ›å¥–å“&lt;/h2&gt;

&lt;p&gt;æœ¬æ¬¡å¤§èµ›çš„å¥–å“ä¾ç„¶åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼Œ å¯¹äºä¼˜ç§€å‚èµ›é€‰æ‰‹è€Œè¨€ï¼Œé£æ¡¨å°†ä¼šä¸ºå…¶æä¾›å®˜æ–¹æ¸ é“æ›å…‰å’Œè¿‘è·ç¦»æ¥è§¦ä¸“å®¶çš„æœºä¼šã€‚&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;WAVE SUMMITå³°ä¼šå®˜æ–¹å‡ºé“ä½ï¼šä¼˜ç§€é¡¹ç›®ä½œè€…å°†æœ‰æœºä¼šè·å¾—WAVE SUMMITå®˜æ–¹å‡ºé“æœºä¼š&lt;/li&gt;
  &lt;li&gt;æŠ•ç¨¿ç²¾é€‰é¡¹ç›®è·å¾—æ›´å¤šæ›å…‰: æ¯”èµ›æœŸé—´ï¼Œé€‰æ‰‹å¯ä»¥åœ¨åœ¨AI StudioæŠ•ç¨¿ï¼Œä¸€æ—¦é€šè¿‡ç²¾é€‰é¡¹ç›®è¯„å®¡ï¼Œåˆ™å¯å¾—åˆ°æ›´å¤šæ›å…‰æœºä¼šã€‚&lt;/li&gt;
  &lt;li&gt;Paddle/Wechatyå·¥ç¨‹å¸ˆ1å¯¹1é¡¹ç›®æŒ‡å¯¼ï¼šä¼˜ç§€é¡¹ç›®ä½œè€…å°†æœ‰æœºä¼šæ¥å—ç™¾åº¦èµ„æ·±å·¥ç¨‹å¸ˆåŠWechatyç¤¾åŒºèµ„æ·±å·¥ç¨‹å¸ˆçš„1å¯¹1æŠ€æœ¯æŒ‡å¯¼ã€‚&lt;/li&gt;
  &lt;li&gt;PPDE/Wechaty Community Contributorç»¿è‰²é€šé“Â ï¼šä¼˜ç§€é¡¹ç›®ä½œè€…å°†è·å¾—é£æ¡¨PPDEæŠ€æœ¯ä¸“å®¶åŠWechaty Community Contributorç”³è¯·ç»¿è‰²é€šé“ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å½“ç„¶ï¼Œä½œä¸ºä¸€åœºå¼€å‘è€…å¤§èµ›ï¼Œä¸°åšçš„å¥–é‡‘å’Œå¥–å“ä¹Ÿè‡ªç„¶å¿…ä¸å¯å°‘ã€‚ç™¾åº¦é£æ¡¨é’ˆå¯¹å‚èµ›é€‰æ‰‹æä¾›äº†ä»¥ä¸‹å¥–åŠ±ï¼š&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;åç§°&lt;/th&gt;
      &lt;th&gt;æ•°é‡&lt;/th&gt;
      &lt;th&gt;å¥–åŠ±&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;ä¸€ç­‰å¥–&lt;/td&gt;
      &lt;td&gt;1å&lt;/td&gt;
      &lt;td&gt;1ä¸‡å…ƒäººæ°‘å¸&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;äºŒç­‰å¥–&lt;/td&gt;
      &lt;td&gt;1å&lt;/td&gt;
      &lt;td&gt;Apple iPad Air 256G 1ä¸ªï¼ˆä»·å€¼2598å…ƒï¼‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;ä¸‰ç­‰å¥–&lt;/td&gt;
      &lt;td&gt;1å&lt;/td&gt;
      &lt;td&gt;Switchæ¸¸æˆæœº 1ä¸ªï¼ˆä»·å€¼2200å…ƒï¼‰&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;æ—©é¸Ÿå¥–&lt;/td&gt;
      &lt;td&gt;10å&lt;/td&gt;
      &lt;td&gt;æå“æ¡“è€å¸ˆã€Šä»0è‡³1ChatBotã€‹1æœ¬&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;æäº¤å¥–&lt;/td&gt;
      &lt;td&gt;ä¸é™&lt;/td&gt;
      &lt;td&gt;æ¯”èµ›å®šåˆ¶ç¤¾åŒºçºªå¿µå“&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰€æœ‰æäº¤äº†å‚èµ›ä½œå“çš„é€‰æ‰‹å‡å¯è·å¾—ç”±ç™¾åº¦é£æ¡¨å®˜æ–¹æä¾›çš„ç‹¬å®¶çºªå¿µå“ä¸€ä»½ï¼è€Œæœ¬æ¬¡æ´»åŠ¨çš„æœ€ç»ˆå†³èµ›å°†ä¼šæˆä¸ºç™¾åº¦å¹´ä¸­å¼€å‘è€…ç››ä¼šWAVE SUMMITä¸Šçš„ä¸€ç¯ï¼Œå¦‚æœä½ çš„ä½œå“è¶³å¤Ÿä¼˜ç§€å¹¶è¿›å…¥äº†å†³èµ›é˜¶æ®µï¼Œé‚£ä¹ˆWAVE SUMMITå…¨åœºæœ€é“çš„ä»”å¾ˆå¯èƒ½å°±æ˜¯ä½ å“¦ï¼&lt;/p&gt;

&lt;p&gt;è®©èŠå¤©æœºå™¨äººæ›´å…·é­…åŠ›ï¼Œè®©åˆ›æ„é‡Šæ”¾å…‰èŠ’ï¼Œè®©æ‰åå¾—ä»¥æ–½å±•ï¼Œæ¬¢è¿åŠ å…¥æœ¬æ¬¡å¤§èµ›ï¼Œä¸å¤§å®¶åŒå°ç«æŠ€ï¼Œæ‰“é€ ä¸“å±äºä½ çš„AI ChatBotå§ï¼&lt;/p&gt;

&lt;h2 id=&quot;èµ›ç¨‹èµ›åˆ¶&quot;&gt;èµ›ç¨‹èµ›åˆ¶&lt;/h2&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;æ—¶é—´&lt;/th&gt;
      &lt;th&gt;èµ›ç¨‹&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;2021/4/12&lt;/td&gt;
      &lt;td&gt;æ­£å¼å¯åŠ¨æ³¨å†ŒæŠ¥å&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2021/4/14&lt;/td&gt;
      &lt;td&gt;çº¿ä¸Šæ¯”èµ›å®£è®²&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2021/4/20&lt;/td&gt;
      &lt;td&gt;é¡¹ç›®repoæäº¤å…¥å£å¼€å¯&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2021/5/10&lt;/td&gt;
      &lt;td&gt;é¡¹ç›®æäº¤æˆªæ­¢&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;2021/5æœˆä¸­ä¸‹æ—¬&lt;/td&gt;
      &lt;td&gt;æœ€ç»ˆå†³èµ›&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;

&lt;p&gt;å‚èµ›å¯¹è±¡åŠè¦æ±‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;å‚èµ›å¯¹è±¡ï¼šæœ¬æ¬¡ç«èµ›é¢å‘å…¨ç¤¾ä¼šå¼€æ”¾ï¼Œä¸é™å¹´é¾„ã€èº«ä»½ã€å›½ç±ï¼Œç›¸å…³é¢†åŸŸçš„ä¸ªäººã€é«˜ç­‰é™¢æ ¡ã€ç§‘ç ”æœºæ„ã€ä¼ä¸šå•ä½ã€åˆåˆ›å›¢é˜Ÿç­‰å‡å¯æŠ¥åå‚èµ›ã€‚&lt;/li&gt;
    &lt;li&gt;å‚èµ›è¦æ±‚ï¼š&lt;/li&gt;
    &lt;li&gt;æœ¬æ¬¡æ¯”èµ›å¯ä»¥ä¸ªäººå‚åŠ ä¹Ÿå¯ä»¥å›¢é˜Ÿå‚åŠ ï¼Œå›¢é˜Ÿäººæ•°ä¸Šçº¿ä¸º5äººã€‚&lt;/li&gt;
    &lt;li&gt;å‚èµ›æ–¹å¼åŠè§„åˆ™&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;

&lt;p&gt;ï¼ˆ1ï¼‰ æ‰€æœ‰å‚èµ›é€‰æ‰‹éƒ½å¿…é¡»åœ¨ç™¾åº¦å¤§è„‘AI Studioå¹³å°æ³¨å†ŒæŠ¥åï¼›
  ï¼ˆ2ï¼‰ å‚èµ›è€…åœ¨è§„å®šæ—¶é—´å†…é¡»åŸºäºé£æ¡¨æ·±åº¦å­¦ä¹ å¹³å°è¿›è¡Œé¡¹ç›®åˆ¶ä½œï¼Œä¸å¾—ä½¿ç”¨å…¶ä»–ç›¸å…³å¹³å°ã€æ¡†æ¶åŠä»»ä½•é£æ¡¨ä¸­æœªåŒ…å«çš„å­¦ä¹ æ–¹æ³•å‚èµ›ï¼›
  ï¼ˆ3ï¼‰ å‚èµ›é€‰æ‰‹éœ€ç¡®ä¿æ³¨å†Œæ—¶æäº¤ä¿¡æ¯å‡†ç¡®æœ‰æ•ˆï¼Œæ‰€æœ‰çš„æ¯”èµ›èµ„æ ¼åŠå¥–é‡‘æ”¯ä»˜å‡ä»¥æäº¤ä¿¡æ¯ä¸ºå‡†ï¼Œå›¢é˜Ÿå‚èµ›çš„å¥–é‡‘å’Œå¥–å“å°†å‘é€è‡³å›¢é˜Ÿé˜Ÿé•¿ï¼Œç”±å›¢é˜Ÿå†…éƒ¨è‡ªè¡Œå†³å®šå¥–é‡‘å’Œå¥–å“çš„åˆ†é…ï¼›
  ï¼ˆ4ï¼‰é€‰æ‰‹ååŠé˜Ÿä¼åçš„è®¾å®šä¸å¾—è¿åä¸­å›½æ³•å¾‹æ³•è§„æˆ–ç¤¾ä¼šå…¬åºè‰¯ä¿—ï¼Œä¸”å‚èµ›é˜Ÿä¼å‘½åä¸­ä¸å¯å‡ºç°â€œç™¾åº¦å®˜æ–¹â€ï¼Œâ€œé£æ¡¨å®˜æ–¹â€ï¼Œâ€œpaddleå®˜æ–¹â€ï¼Œâ€œå®˜æ–¹baselineâ€ç­‰å­—æ ·ã€‚è‹¥å‘½åè¿è§„çš„é˜Ÿä¼åœ¨æ”¶åˆ°æ¯”èµ›ä¸»åŠæ–¹è­¦å‘Šåä»æœªä¿®æ”¹é˜Ÿä¼åç§°ï¼Œæ¯”èµ›ä¸»åŠæ–¹æœ‰æƒè§£æ•£è¯¥é˜Ÿä¼ ï¼›
  ï¼ˆ5ï¼‰ èµ›äº‹äº¤æµç¾¤ï¼šå¾®ä¿¡æ‰«ç æ·»åŠ é£æ¡¨å°å“¥å“¥ï¼Œå›å¤â€œåˆ›æ„èµ›â€å³å¯å…¥ç¾¤ã€‚&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-with-paddlepaddle/qrcode.png&quot; alt=&quot;qrcode&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å‚èµ›é¡»çŸ¥è¡¥å……&lt;/p&gt;

&lt;blockquote&gt;
  &lt;ul&gt;
    &lt;li&gt;å…¬å¹³ç«æŠ€ï¼š å‚èµ›è€…ç¦æ­¢åœ¨æ¯”èµ›ä¸­æŠ„è¢­ä»–äººä½œå“ï¼Œç»å‘ç°å°†å–æ¶ˆæ¯”èµ›æˆç»©å¹¶ä¸¥è‚ƒå¤„ç†ï¼›&lt;/li&gt;
    &lt;li&gt;ç»„ç»‡å£°æ˜ï¼š ç»„å§”ä¼šä¿ç•™å¯¹æ¯”èµ›è§„åˆ™ã€èµ›äº‹å®‰æ’è¿›è¡Œè°ƒæ•´å’Œä¿®æ”¹çš„æƒåˆ©ã€æ¯”èµ›ä½œå¼Šè¡Œä¸ºçš„åˆ¤å®šæƒåˆ©å’Œå¤„ç½®æƒåˆ©ã€æ”¶å›æˆ–æ‹’ç»æˆäºˆå½±å“ç»„ç»‡åŠå…¬å¹³æ€§çš„å‚èµ›å›¢é˜Ÿå¥–é¡¹çš„æƒåˆ©ï¼›&lt;/li&gt;
    &lt;li&gt;ä½œå“äº§æƒï¼š å‚èµ›ä½œå“(åŒ…å«ä½†ä¸é™äºç®—æ³•ã€æ¨¡å‹ç­‰)çŸ¥è¯†äº§æƒå½’å‚èµ›é€‰æ‰‹æ‰€æœ‰ï¼Œç»„å§”ä¼šæœ‰æƒå°†å‚èµ›ä½œå“ã€ä½œå“ç›¸å…³ã€å‚èµ›å›¢é˜Ÿä¿¡æ¯ç”¨äºå®£ä¼ å“ã€ç›¸å…³å‡ºç‰ˆç‰©ã€æŒ‡å®šåŠæˆæƒåª’ä½“å‘å¸ƒã€å®˜æ–¹ç½‘ç«™æµè§ˆåŠä¸‹è½½ã€å±•è§ˆï¼ˆå«å·¡å±•ï¼‰ç­‰æ´»åŠ¨é¡¹ç›®ï¼Œå¤§èµ›ç»„ç»‡å•ä½äº«æœ‰ä¼˜å…ˆåˆä½œæƒåˆ©ã€‚&lt;/li&gt;
    &lt;li&gt;åä½œå¼Šè¯´æ˜
ï¼ˆ1ï¼‰ å‚ä¸è€…ç¦æ­¢æ³¨å†Œå¤šè´¦æˆ·æŠ¥åï¼Œç»å‘ç°å°†å–æ¶ˆæˆç»©å¹¶ä¸¥è‚ƒå¤„ç†ã€‚
ï¼ˆ2ï¼‰ å‚ä¸è€…ç¦æ­¢åœ¨è€ƒæ ¸æŠ€æœ¯èƒ½åŠ›çš„èŒƒå›´å¤–åˆ©ç”¨è§„åˆ™æ¼æ´æˆ–æŠ€æœ¯æ¼æ´ç­‰ä¸è‰¯é€”å¾„æé«˜æˆç»©æ’åï¼Œç¦æ­¢ä¸Šä¼ å…¶ä»–é¡¹ç›®é“¾æ¥è¿›è¡Œç§¯åˆ†ã€‚ç»å‘ç°å°†å–æ¶ˆæˆç»©å¹¶ä¸¥è‚ƒå¤„ç†ã€‚
ï¼ˆ3ï¼‰ å¯ä»¥æ¥è§¦åˆ°èµ›é¢˜ç›¸å…³æ•°æ®çš„äººå‘˜ï¼Œå…¶æäº¤ä½œå“å°†ä¸è®¡å…¥æ’è¡Œæ¦œåŠè¯„å¥–ã€‚
ï¼ˆ4ï¼‰ AI Studioå°†æ”¶é›†é€‰æ‰‹ä¿¡æ¯ä»¥åŠä»£ç ã€æ¨¡å‹ã€ç³»ç»ŸæŠ¥å‘Šç”¨äºæˆç»©è¯„å®šã€æ¯”èµ›é€šçŸ¥ç­‰ç›¸å…³æ¯”èµ›äº‹é¡¹ã€‚&lt;/li&gt;
  &lt;/ul&gt;
&lt;/blockquote&gt;</content><author><name>wj-mcat</name></author><category term="article" /><category term="baidu" /><category term="ai" /><category term="chatbot" /><category term="completion" /><summary type="html">ä½œè€…: wj-mcat è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•å·¥ç¨‹å¸ˆï¼Œpython-wechaty ä½œè€…</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-wechaty-with-paddlepaddle/header.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-wechaty-with-paddlepaddle/header.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">æ•™ä½ ç”¨python-wecahtyå’Œwebåè®®å¼€å‘æœºå™¨äºº</title><link href="https://wechaty.js.org/2021/04/17/python-wechaty-use-web/" rel="alternate" type="text/html" title="æ•™ä½ ç”¨python-wecahtyå’Œwebåè®®å¼€å‘æœºå™¨äºº" /><published>2021-04-17T00:00:00+00:00</published><updated>2021-04-17T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/17/python-wechaty-use-web</id><content type="html" xml:base="https://wechaty.js.org/2021/04/17/python-wechaty-use-web/">&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/wj-Mcat&quot;&gt;wj-mcat&lt;/a&gt; è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•å·¥ç¨‹å¸ˆï¼Œpython-wechaty ä½œè€…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;å†™è¿™ç¯‡æ–‡ç« çš„åŸå› : go-wechatyä½œè€…&lt;a href=&quot;https://github.com/dchaofei&quot;&gt;dchaofei&lt;/a&gt;æŠ¢å…ˆå†™äº†&lt;a href=&quot;https://wechaty.js.org/2021/04/16/go-wechaty-use-web/&quot;&gt;webåè®®å¤æ´»çš„åšå®¢&lt;/a&gt;ï¼Œä½œä¸º&lt;a href=&quot;http://github.com/wechaty/python-wechaty&quot;&gt;python-wechaty&lt;/a&gt;çš„ä½œè€…æˆ‘ä¹Ÿéœ€è¦ç»™å¤§å®¶æ›´åŠ è¯¦ç»†çš„ä»‹ç»å¦‚ä½•ä½¿ç”¨&lt;a href=&quot;http://github.com/wechaty/python-wechaty&quot;&gt;python-wechaty&lt;/a&gt;æ¥ç™»é™†webç‰ˆæœ¬çš„å¾®ä¿¡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸€ä»‹ç»&quot;&gt;ä¸€ã€ä»‹ç»&lt;/h2&gt;

&lt;p&gt;å¾®ä¿¡ç‰ˆæœ¬çš„æœºå™¨äººç§ç±»å¾ˆå¤šï¼Œå‡ºç°çš„åè®®ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚Ipadã€Macä»¥åŠWindowsåè®®ï¼Œè€Œæœ€æ—©å‡ºç°çš„å…¶å®æ˜¯webç‰ˆæœ¬çš„åè®®ã€‚åœ¨å‰å‡ å¹´ç”±äºè…¾è®¯çš„ä¸€äº›é™åˆ¶ï¼Œå°†å¤§éƒ¨åˆ†ç”¨æˆ·çš„webç™»é™†çš„æƒé™ç»™å…³æ‰äº†ï¼Œå¯¼è‡´å¾ˆå¤šwebåè®®ç‰ˆæœ¬çš„å¾®ä¿¡æœºå™¨äººç›´æ¥æ­»æ‰äº†ï¼Œæ¯”å¦‚è‘—åçš„itchatã€‚&lt;/p&gt;

&lt;p&gt;å¯æ˜¯è‡ªä»ç»Ÿä¿¡å’Œè…¾è®¯å…±åŒæ¨å‡ºæ¡Œé¢ç‰ˆæœ¬çš„å¾®ä¿¡ä¹‹åï¼Œwebç‰ˆæœ¬çš„æœºå™¨äººä»¥æŸç§æ–¹å¼å¤æ´»äº†ï¼Œè€Œwechatyä¾¿æ˜¯æœ€æ—©æ¥è§£å†³è¿™ä¸ªäº‹æƒ…çš„å¼€æºé¡¹ç›®ä¹‹ä¸€ï¼Œæ¥ä¸‹æ¥æˆ‘å°†è¯¦ç»†ä»‹ç»å¦‚ä½•ä½¿ç”¨&lt;a href=&quot;http://github.com/wechaty/python-wechaty&quot;&gt;python-wechaty&lt;/a&gt;åŸºäºwebç‰ˆæœ¬åè®®å¼€å‘èŠå¤©æœºå™¨äººã€‚&lt;/p&gt;

&lt;p&gt;æ•´ä½“æ­¥éª¤åˆ†ä¸ºä¸¤æ­¥ï¼š&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;ä½¿ç”¨Dockerå¯åŠ¨webåè®®æœåŠ¡&lt;/li&gt;
  &lt;li&gt;ä½¿ç”¨python-wechatyè¿æ¥æœåŠ¡&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ç¬¬ä¸€æ­¥å°†webç‰ˆæœ¬çš„åè®®ä»¥gRPCæœåŠ¡çš„å½¢å¼æš´éœ²å‡ºæ¥ï¼Œä½¿ç”¨è¿‡ç¨‹éå¸¸ç®€å•ï¼Œåªæ˜¯éœ€è¦æ³¨æ„å‡ ä¸ªé…ç½®é¡¹ï¼›ç¬¬äºŒæ­¥åˆ™æ˜¯ä½¿ç”¨python-wechatyè¿æ¥è¯¥æœåŠ¡ï¼Œå¼€å‘èŠå¤©æœºå™¨äººã€‚&lt;/p&gt;

&lt;h2 id=&quot;äºŒå¯åŠ¨webåè®®æœåŠ¡&quot;&gt;äºŒã€å¯åŠ¨webåè®®æœåŠ¡&lt;/h2&gt;

&lt;p&gt;å¯åŠ¨webåè®®æœåŠ¡è„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker pull wechaty/wechaty:latest

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_LOG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;verbose&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;wechaty-puppet-wechat&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;8080&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;python-wechaty-uos-token&quot;&lt;/span&gt;

docker run &lt;span class=&quot;nt&quot;&gt;-ti&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; wechaty_puppet_service_token_gateway &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_LOG &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET_SERVER_PORT &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_TOKEN &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
wechaty/wechaty:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å¦‚æœæ˜¯åœ¨æœ¬åœ°æµ‹è¯•æ—¶ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/code&gt;å’Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_TOKEN&lt;/code&gt;ç›¸å¯¹æ¯”è¾ƒéšæ„ï¼Œå¤§å®¶éƒ½å¯ä»¥éšæ—¶è®¾ç½®ï¼Œå› ä¸ºä¸‹ä¸€æ­¥ä¸­çš„è¿æ¥å¯ä»¥è®¾ç½®æœ¬åœ°è¿æ¥ã€‚&lt;/p&gt;

&lt;p&gt;å¦‚æœæ˜¯åœ¨æœåŠ¡ç«¯éƒ¨ç½²æ—¶ï¼Œ&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/code&gt;æ˜¯éœ€è¦ä¿è¯æ‰€åœ¨æœåŠ¡å™¨çš„è¯¥ç«¯å£æ˜¯ä¿æŒå¼€æ”¾çš„ï¼Œä»¥ä¿è¯ä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python-wechaty&lt;/code&gt;èƒ½å¤Ÿæ­£å¸¸è¿æ¥ï¼›æ­¤å¤–&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_TOKEN&lt;/code&gt;å°†ç”¨äºåœ¨wechaty tokenä¸­å¿ƒæ³¨å†Œå¯åŠ¨çš„æœåŠ¡ï¼Œä»¥è®©&lt;a href=&quot;http://github.com/wechaty/python-wechaty&quot;&gt;python-wechaty&lt;/a&gt;èƒ½å¤Ÿæ‰¾åˆ°è¯¥æœåŠ¡çš„åœ°å€ï¼Œæ‰€ä»¥å¿…é¡»æ˜¯ä¿®æ”¹æˆå”¯ä¸€æ ‡è¯†ç¬¦ï¼Œæ¨èä½¿ç”¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;uuid&lt;/code&gt;æ¥ä»£æ›¿&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python-wechaty-uos-token&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;h2 id=&quot;ä¸‰ä½¿ç”¨python-wechatyè¿æ¥æœåŠ¡&quot;&gt;ä¸‰ã€ä½¿ç”¨python-wechatyè¿æ¥æœåŠ¡&lt;/h2&gt;

&lt;p&gt;ä½¿ç”¨pythonå¼€å‘æœ€ç®€å•çš„èŠå¤©æœºå™¨äººï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;# bot.py
&lt;/span&gt;&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wechaty&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'scan'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Scan QR Code to login: {}&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;https://wechaty.js.org/qrcode/{}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'login'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'User {} logged in'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'message'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;lambda&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'Message: {}'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;main&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“åœ¨æœ¬åœ°æµ‹è¯•æ—¶ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVICE_ENDPOINT&lt;/code&gt;ç¯å¢ƒå˜é‡è®©&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;python-wechaty&lt;/code&gt;ç›´æ¥ä¸æœ¬åœ°çš„webæœåŠ¡è¿æ¥ã€‚ä¾‹å¦‚ï¼š&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVICE_ENDPOINT=127.0.0.1:8080&lt;/code&gt;ï¼Œè¿è¡Œè„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;python-wechaty-uos-token &lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVICE_ENDPOINT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;127.0.0.1:8080 python bot.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“åœ¨è¿œç«¯æœåŠ¡å™¨éƒ¨ç½²æ—¶ï¼Œåªéœ€è¦è®¾ç½®&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/code&gt;å³å¯è¿æ¥å¯åŠ¨çš„webæœåŠ¡ï¼Œè¿è¡Œè„šæœ¬å¦‚ä¸‹æ‰€ç¤ºï¼š&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;python-wechaty-uos-token python bot.py
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;æ€»ç»“&quot;&gt;æ€»ç»“&lt;/h2&gt;

&lt;p&gt;python-wechatyæ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„èŠå¤©æœºå™¨äººæ¡†æ¶ï¼Œç†è®ºä¸Šèƒ½å¤Ÿå¯¹æ¥ä»»ä½•IMå¹³å°ï¼Œæ‹¥æœ‰åŸç”Ÿä¸AIå¯¹æ¥çš„èƒ½åŠ›ï¼Œèƒ½å¤Ÿå¿«é€Ÿå¼€å‘å‡ºåŠŸèƒ½å¼ºå¤§çš„Chatbotï¼Œæ¬¢è¿å¤§å®¶å…³æ³¨&lt;a href=&quot;https://github.com/wechaty/python-wechaty&quot;&gt;python-wechaty&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;ç›¸å…³é“¾æ¥&quot;&gt;ç›¸å…³é“¾æ¥&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wechaty/python-wechaty&quot;&gt;python-wechty&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/wechaty/python-wechaty-getting-started&quot;&gt;python-wechaty getting started&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wechaty.js.org/2021/04/13/wechaty-uos-web/&quot;&gt;webåè®®å¤æ´»&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wechaty.js.org/docs/polyglot/python/&quot;&gt;Python Wechaty Getting Started&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wechaty.js.org/docs/puppet-providers/wechat&quot;&gt;puppet-providers&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>wj-mcat</name></author><category term="article" /><category term="code" /><category term="wechaty-puppet-wechat" /><category term="webåè®®" /><category term="python" /><summary type="html">ä½œè€…: wj-mcat è‡ªç„¶è¯­è¨€å¤„ç†ç®—æ³•å·¥ç¨‹å¸ˆï¼Œpython-wechaty ä½œè€…</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-python-wechaty-use-web/wechaty-love-wechaty-desktop.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-python-wechaty-use-web/wechaty-love-wechaty-desktop.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">æ•™ä½ ç”¨go-wecahtyå’Œwebåè®®å¼€å‘æœºå™¨äºº</title><link href="https://wechaty.js.org/2021/04/16/go-wechaty-use-web/" rel="alternate" type="text/html" title="æ•™ä½ ç”¨go-wecahtyå’Œwebåè®®å¼€å‘æœºå™¨äºº" /><published>2021-04-16T00:00:00+00:00</published><updated>2021-04-16T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/16/go-wechaty-use-web</id><content type="html" xml:base="https://wechaty.js.org/2021/04/16/go-wechaty-use-web/">&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/dchaofei&quot;&gt;dchaofei&lt;/a&gt;ï¼Œgoå¼€å‘å·¥ç¨‹å¸ˆï¼Œgo-wechaty ä½œè€…&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;p&gt;å†™è¿™ç¯‡æ–‡ç« çš„åŸå› : æœ€è¿‘å‘ç° web åè®®ä»¥æŸç§æ–¹å¼åˆå¤æ´»äº†ï¼Œæ‰€ä»¥æƒ³è®© go-wechaty çš„å°ä¼™ä¼´ä¹Ÿèƒ½ä½¿ç”¨ web åè®®ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å‰è¨€&quot;&gt;å‰è¨€&lt;/h2&gt;

&lt;p&gt;å¤§å®¶éƒ½çŸ¥é“ç›®å‰å¾®ä¿¡æœ‰ webã€macã€padã€windows ç­‰å¹³å°, å¦‚æœæƒ³å®ç°ä¸€ä¸ªå¾®ä¿¡è‡ªåŠ¨åŒ–æœºå™¨äººå°±éœ€è¦äº†è§£è¿™äº›å¹³å°æ‰€ä½¿ç”¨çš„åè®®ï¼Œ
è€Œ web å¹³å°æˆ‘ä»¬å¯ä»¥çœ‹åˆ° js ä»£ç ï¼Œç›¸å¯¹æ¥è¯´æ˜¯æ¯”è¾ƒç®€å•ï¼Œå…¶ä»–å¹³å°å°±éœ€è¦å» hook æˆ–è€…åç¼–è¯‘æ‰èƒ½äº†è§£åº•å±‚åè®®ï¼Œæ­£å› ä¸ºè¿™äº›å¹³å°å®ç°éš¾åº¦æ¯”è¾ƒå¤§æ‰€æœ‰æ²¡æœ‰å¼€æºçš„ä»£ç ã€‚&lt;/p&gt;

&lt;p&gt;è™½ç„¶éš¾åº¦æ¯”è¾ƒå¤§ï¼Œä½†è¿˜æ˜¯æœ‰äººå®ç°äº†è¿™äº›åè®®ï¼Œä½†æ˜¯ä¼šä»¥æœåŠ¡çš„æ–¹å¼æä¾›å‡ºæ¥ï¼Œå¦‚æœæˆ‘ä»¬è¦æƒ³ä½¿ç”¨è¿™äº›åè®®å°±å¿…é¡»æ‰¾æœåŠ¡æä¾›è€…å•†
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ç”³è¯·token&lt;/code&gt; æˆ–è€…&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;è´­ä¹°token&lt;/code&gt;ã€‚&lt;/p&gt;

&lt;p&gt;go-wechaty ä¸ æœåŠ¡æä¾›å•†çš„äº¤äº’å¦‚ä¸‹å›¾
&lt;img src=&quot;/assets/2021/04-go-wechaty-use-web/struct.png&quot; alt=&quot;äº¤äº’å›¾&quot; /&gt;&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;go-wecahty é¦–å…ˆä¼šç”¨ä¹‹å‰æˆ‘ä»¬è´­ä¹°æˆ–ç”³è¯·çš„ token é€šè¿‡ç½‘å…³è·å–åˆ°æœåŠ¡æä¾›å•† token æ‰€å¯¹åº”çš„æœåŠ¡å™¨åœ°å€&lt;/li&gt;
  &lt;li&gt;ç„¶åç”¨è·å–åˆ°çš„æœåŠ¡å™¨åœ°å€ä¸ puppet æœåŠ¡è¿›è¡Œç›´æ¥è¿æ¥&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;å¯èƒ½è´­ä¹°æˆ–ç”³è¯· token ä¼šé˜»æŒ¡å¤§å¤šå¼€å‘è€…å¼€å‘å¾®ä¿¡æœºå™¨äººçš„æƒ³æ³•ï¼Œä½†æ˜¯æ—¢ç„¶ web åè®®å¯ä»¥ç”¨äº†ï¼Œæˆ‘ä»¬å°±å¯ä»¥è‡ªå®ç° puppet serviceäº†ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¦‚ä½•ä½¿ç”¨&quot;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h2&gt;

&lt;p&gt;ä¸€ã€å…ˆç”¨ @huan æä¾›çš„é•œåƒå¯åŠ¨ä¸€ä¸ª web åè®®çš„ puppet-service&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_LOG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;verbose&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;wechaty-puppet-wechat&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;30001&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;3d415ebb-7a6f-4cba-b602-1f4ae400f011&quot;&lt;/span&gt;

docker run &lt;span class=&quot;nt&quot;&gt;-ti&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; wechaty_puppet_service_token_gateway &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_LOG &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET_SERVER_PORT &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_TOKEN &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
wechaty/wechaty:latest
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å½“çœ‹åˆ°æœ‰è¾“å‡º &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Online QR Code Image: https://wechaty.js.org/qrcode/xxxx&lt;/code&gt; å°±è¯´æ˜å¯åŠ¨æˆåŠŸäº†&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/code&gt; ç¯å¢ƒå˜é‡æ˜¯æˆ‘ä»¬å¯åŠ¨ web åè®® puppet service æä¾›çš„ç«¯å£&lt;/p&gt;

&lt;p&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;WECHATY_TOKEN&lt;/code&gt; æ˜¯æˆ‘ä»¬éšæœºç”Ÿæˆçš„å­—ç¬¦ä¸²ï¼Œç”¨äºæŠŠå½“å‰puppet service æ³¨å†Œåˆ° puppet ç½‘å…³&lt;/p&gt;

&lt;p&gt;äºŒã€å¯åŠ¨ go-wecahty å†™çš„ä¸€ä¸ªç®€å•çš„ ding-dong æœºå™¨äºº&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/wechaty/go-wechaty-getting-started.git

&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVICE_ENDPOINT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;127.0.0.1:30001 make bot

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™ä¸ªæœºå™¨äººåªæœ‰ä¸€ä¸ªåŠŸèƒ½ï¼Œæ”¶åˆ° ding å°±ä¼šå›å¤ dong&lt;/p&gt;

&lt;p&gt;æ‰§è¡Œå¯åŠ¨å‘½ä»¤è¾“å‡ºçš„ç»“æœï¼Œçœ‹åˆ°äºŒç»´ç é“¾æ¥æˆ‘ä»¬å°±å¯ä»¥ç‚¹å‡»ç„¶åç”¨å¾®ä¿¡æ‰«ç ç™»å½•äº†&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nv&quot;&gt;$ WECHATY_PUPPET_SERVICE_ENDPOINT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;127.0.0.1:30001 make bot
// stdout
go run examples/ding-dong-bot.go
2021/04/16 19:44:18 PuppetService Start&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt;
2021/04/16 19:44:18 PuppetService onGrpcStreamEvent&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;:EVENT_TYPE_SCAN payload:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;qrcode&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;https://login.weixin.qq.com/l/wZG2J5sZrw==&quot;&lt;/span&gt;,&lt;span class=&quot;s2&quot;&gt;&quot;status&quot;&lt;/span&gt;:5&lt;span class=&quot;o&quot;&gt;}})&lt;/span&gt;
Scan QR Code to login: ScanStatusTimeout
https://wechaty.js.org/qrcode/https://login.weixin.qq.com/l/wZG2J5sZrw&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;
2021/04/16 19:44:45 PuppetService ContactRawPayload&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;@d9b0073d47ec85dcfbe8b0427c3da085067103aa721478f77db1cad011267bc7&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
Scan QR Code to login: ScanStatusConfirmed
https://wechaty.js.org/qrcode/https://login.weixin.qq.com/l/wZG2J5sZrw&lt;span class=&quot;o&quot;&gt;==&lt;/span&gt;
2021/04/16 19:44:45 PuppetService onGrpcStreamEvent&lt;span class=&quot;o&quot;&gt;({&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt;:EVENT_TYPE_LOGIN payload:&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;contactId&quot;&lt;/span&gt;:&lt;span class=&quot;s2&quot;&gt;&quot;@d9b0073d47ec85dcfbe8b0427c3da085067103aa721478f77db1cad011267bc7&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;}})&lt;/span&gt;
2021/04/16 19:44:45 PuppetService ContactRawPayload&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;@d9b0073d47ec85dcfbe8b0427c3da085067103aa721478f77db1cad011267bc7&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;
User å¾®ä¿¡æ˜µç§° logined
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ç„¶åæˆ‘ä»¬å‘æœºå™¨äººå‘é€ä¸€ä¸ª ding, æœºå™¨äººå°±ä¼šå›å¤ä¸€ä¸ª dong
&lt;img src=&quot;/assets/2021/04-go-wechaty-use-web/ding.jpeg&quot; alt=&quot;ding-dong&quot; /&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœå¯åŠ¨æœºå™¨äººä¸æƒ³ä¾èµ–ç¯å¢ƒå˜é‡ï¼Œä¹Ÿå¯ä»¥å†™åœ¨ä»£ç é‡Œ&lt;/p&gt;

&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;// Endpoint å’Œ Token äºŒé€‰ä¸€&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;wechaty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;NewWechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wechaty&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WithPuppetOption&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;wp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Option&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Endpoint&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;127.0.0.1:30001&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
        &lt;span class=&quot;c&quot;&gt;//Token: &quot;3d415ebb-7a6f-4cba-b602-1f4ae400f011&quot;,&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;Timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Duration&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;time&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Minute&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2&gt;ğŸ”—&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;go wechty: &lt;a href=&quot;https://github.com/wechaty/go-wechaty&quot;&gt;https://github.com/wechaty/go-wechaty&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;ding-dong bot: &lt;a href=&quot;https://github.com/wechaty/go-wechaty-getting-started&quot;&gt;https://github.com/wechaty/go-wechaty-getting-started&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;webåè®®å¤æ´»: &lt;a href=&quot;https://wechaty.js.org/2021/04/13/wechaty-uos-web/&quot;&gt;https://wechaty.js.org/2021/04/13/wechaty-uos-web/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Go Wechaty Getting Started: &lt;a href=&quot;https://wechaty.js.org/docs/polyglot/go/&quot;&gt;https://wechaty.js.org/docs/polyglot/go/&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;puppet-providers: &lt;a href=&quot;https://wechaty.js.org/docs/puppet-providers/wechat&quot;&gt;https://wechaty.js.org/docs/puppet-providers/wechat&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>dchaofei</name></author><category term="article" /><category term="code" /><category term="wechaty-puppet-wechat" /><category term="webåè®®" /><category term="go" /><summary type="html">ä½œè€…: dchaofeiï¼Œgoå¼€å‘å·¥ç¨‹å¸ˆï¼Œgo-wechaty ä½œè€…</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-go-wechaty-use-web/struct.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-go-wechaty-use-web/struct.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">é‡ç£…ï¼šä½¿ç”¨UOSå¾®ä¿¡æ¡Œé¢ç‰ˆåè®®ç™»å½•ï¼Œwechatyå…è´¹ç‰ˆwebåè®®é‡æ”¾è£å…‰</title><link href="https://wechaty.js.org/2021/04/13/wechaty-uos-web/" rel="alternate" type="text/html" title="é‡ç£…ï¼šä½¿ç”¨UOSå¾®ä¿¡æ¡Œé¢ç‰ˆåè®®ç™»å½•ï¼Œwechatyå…è´¹ç‰ˆwebåè®®é‡æ”¾è£å…‰" /><published>2021-04-13T00:00:00+00:00</published><updated>2021-04-13T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/13/wechaty-uos-web</id><content type="html" xml:base="https://wechaty.js.org/2021/04/13/wechaty-uos-web/">&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/gengchen528/&quot;&gt;Leo_chen&lt;/a&gt;ï¼Œé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå–œæ¬¢ä½¿ç”¨nodeåšå„ç§é¡¹ç›®&lt;/p&gt;
&lt;/blockquote&gt;

&lt;!-- more --&gt;

&lt;h2 id=&quot;é‡ç£…é€šçŸ¥&quot;&gt;é‡ç£…é€šçŸ¥&lt;/h2&gt;

&lt;p&gt;å¾ˆé«˜å…´èƒ½å¤Ÿå†™è¿™ç¯‡æ–‡ç« é€šçŸ¥å¤§å®¶Wechatyçš„webåè®®åˆèƒ½å¤§æ”¾å…‰å½©äº†ï¼Œå¦‚æœä¹‹å‰ä½ çš„å¾®ä¿¡æç¤ºä¸èƒ½ç™»å½•webç«¯ï¼Œé‚£ä¹ˆè¿™ä¸ªæ›´æ–°å°†ä¼šæ˜¯ä½ çš„ç¦éŸ³ã€‚å› ä¸ºç°åœ¨çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wechaty-puppet-wechat&lt;/code&gt;å·²ç»æ”¯æŒä½¿ç”¨UOSå¾®ä¿¡æ¡Œé¢ç‰ˆåè®®ç™»å½•ï¼Œèµ¶å¿«æ¥å°è¯•ä¸€ä¸‹å§ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¦‚ä½•ä½¿ç”¨&quot;&gt;å¦‚ä½•ä½¿ç”¨&lt;/h2&gt;

&lt;blockquote&gt;
  &lt;p&gt;å…³é”®ä¾èµ–ï¼šnpm install wechaty-puppet-wechat â€“save&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;å¯¹ç°æœ‰ä»£ç æ— ä»»ä½•ä¾µå…¥æ€§ï¼Œåªæ˜¯æ›´æ–°ä¸€ä¸‹ä¾èµ–å³å¯&lt;/p&gt;

&lt;p&gt;ä¸€ã€é¦–å…ˆå®‰è£…æœ€æ–°çš„&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wechaty-puppet-wechat&lt;/code&gt;ä¾èµ–å’Œé…ç½®ç¯å¢ƒ&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;qrcode-terminal &lt;span class=&quot;nt&quot;&gt;--save&lt;/span&gt;
npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;wechaty 
npm &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;wechaty-puppet-wechat &lt;span class=&quot;nt&quot;&gt;--save&lt;/span&gt; // è¿™ä¸ªä¾èµ–æ˜¯å…³é”®
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;wechaty-puppet-wechat // è¿™é‡Œä¹Ÿæ˜¯å…³é”®ï¼Œéœ€è¦é…ç½®ä½ ä½¿ç”¨çš„puppet
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;äºŒã€è¯·ä¿è¯ä½ çš„puppeté…ç½®çš„æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wechaty-puppet-wechat&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;å¦‚æœä½ ä½¿ç”¨çš„æ˜¯&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ipadlocal&lt;/code&gt;ï¼Œåˆæƒ³ä½“éªŒä¸€ä¸‹webåè®®ï¼Œé‚£ä¹ˆä¹Ÿéœ€è¦æŒ‰ç…§ä¸€ä¸‹é…ç½®è¿›è¡Œ&lt;/p&gt;

&lt;p&gt;æ¡ˆä¾‹ï¼š&lt;/p&gt;

&lt;p&gt;index.js&lt;/p&gt;

&lt;div class=&quot;language-javascript highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Wechaty&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;wechaty&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;wechat-puppet-wechat&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Wechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// generate xxxx.memory-card.json and save login data for the next login&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//  äºŒç»´ç ç”Ÿæˆ&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onScan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;qrcode-terminal&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// åœ¨consoleç«¯æ˜¾ç¤ºäºŒç»´ç &lt;/span&gt;
  &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;qrcodeImageUrl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://wechaty.js.org/qrcode/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nb&quot;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcodeImageUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;// ç™»å½•&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onLogin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`è´´å¿ƒå°åŠ©ç†&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;ç™»å½•äº†`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;AUTOREPLY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`å·²å¼€å¯æœºå™¨äººè‡ªåŠ¨èŠå¤©æ¨¡å¼`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
  &lt;span class=&quot;c1&quot;&gt;// ç™»é™†ååˆ›å»ºå®šæ—¶ä»»åŠ¡&lt;/span&gt;
  &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;initDay&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;c1&quot;&gt;//ç™»å‡º&lt;/span&gt;
&lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onLogout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
  &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`å°åŠ©æ‰‹&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; å·²ç»ç™»å‡º`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onScan&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onLogin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;onLogout&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;å¼€å§‹ç™»é™†å¾®ä¿¡&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
  &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;((&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;console&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;));&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æŒ‰ç…§ä»¥ä¸Šé…ç½®ï¼Œæ‹¿èµ·ä½ çš„æ‰‹æœºæ‰«ç å³å¯ï¼Œä½ ä¼šå‘ç°ä»¥å‰ä¸èƒ½ç™»å½•çš„å¾®ä¿¡ä¹Ÿå¯ä»¥ç™»å½•äº†ï¼ŒæƒŠå–œä¸ï¼Œæ„å¤–ä¸ã€‚&lt;/p&gt;

&lt;h2 id=&quot;å¸¸è§é—®é¢˜&quot;&gt;å¸¸è§é—®é¢˜&lt;/h2&gt;

&lt;p&gt;1ã€ä¸ºä»€ä¹ˆæˆ‘æ›´æ–°äº†æœ€æ–°ä¾èµ–è¿˜æ˜¯æç¤ºæ— æ³•ç™»å½•webç«¯å¾®ä¿¡ï¼Ÿ&lt;/p&gt;

&lt;p&gt;è¯·æŸ¥çœ‹ä½ é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæ˜¯å¦å­˜åœ¨&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wechaty-puppet-wechat.memory-card.json&lt;/code&gt;è¿™æ ·çš„æ–‡ä»¶ï¼Œå¦‚æœæœ‰è¯·æŠŠå®ƒåˆ é™¤åé‡æ–°æ‰§è¡Œå³å¯ï¼Œè¿™ä¸ªå­˜å‚¨çš„cookies
æœ‰å¯èƒ½å·²ç»è¿‡æœŸ(æœ€æ–°ç‰ˆæœ¬å·²ç»ä¿®å¤æ­¤é—®é¢˜)&lt;/p&gt;

&lt;p&gt;2ã€è¿™ä¸ªpuppetå¯ä»¥ä¿è¯ä¸€ç›´èƒ½ç»•è¿‡webç™»å½•ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç›®å‰çœ‹æ¥æ˜¯å¯ä»¥ç»•è¿‡webç«¯çš„é™åˆ¶ï¼Œä½†æ˜¯ä¸ä¿è¯ä»¥åä¼šå˜åŒ–&lt;/p&gt;

&lt;p&gt;3ã€ç»•è¿‡è¿™ä¸ªé™åˆ¶ä¼šè¢«å¾®ä¿¡å‘ç°å°ç¦ä¹ˆï¼Ÿ&lt;/p&gt;

&lt;p&gt;ç›®å‰é‡‡ç”¨çš„ç»•è¿‡æ–¹å¼å…¶å®æ˜¯ä½¿ç”¨äº†UOSçš„æ¡Œé¢ç‰ˆå¾®ä¿¡è¯·æ±‚å¤´ï¼Œæ‰€ä»¥å¦‚æœä½ ä¸åšè¿åå¾®ä¿¡åè®®çš„äº‹æƒ…ï¼Œå¤§æ¦‚ç‡æ˜¯æ²¡é—®é¢˜çš„ã€‚å¦‚æœä½ è¿åäº†å¾®ä¿¡è§„å®šï¼Œé‚£å°±ä¸çŸ¥é“äº†&lt;/p&gt;

&lt;p&gt;æ›´å¤šé—®é¢˜åç»­ä¼šæ ¹æ®åé¦ˆç»§ç»­è¡¥å……&lt;/p&gt;

&lt;h2 id=&quot;åŸç†&quot;&gt;åŸç†&lt;/h2&gt;

&lt;p&gt;å…·ä½“çš„å®ç°åŸç†å¯ä»¥å‚è€ƒè¿™ä¸ª&lt;a href=&quot;https://github.com/wechaty/wechaty-puppet-wechat/issues/127&quot;&gt;issues&lt;/a&gt; ï¼Œä»£ç ä¿®æ”¹å‚è§ &lt;a href=&quot;https://github.com/wechaty/wechaty-puppet-wechat/pull/129&quot;&gt;https://github.com/wechaty/wechaty-puppet-wechat/pull/129&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;å¤§æ¦‚çš„æ„æ€å°±æ˜¯UOSä¸‹çš„å¾®ä¿¡åªæ˜¯ç½‘é¡µç‰ˆå¥—äº†ä¸ªelectronï¼Œæ‰€ä»¥å‘¢æœ‰å¤§ç¥å°±å¯¹æ¯”äº†ä¸€ä¸‹è¯·æ±‚å¤´ï¼Œå‘ç°äº†åªè¦åœ¨è¯·æ±‚çš„åœ°å€ä¸Šé¦–å…ˆåŠ ä¸€ä¸ª&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;?target=t&lt;/code&gt;å°±æ˜¯è¿™æ ·&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://wx.qq.com/?target=t&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;ç„¶ååœ¨æ‰«ç ç™»é™†åæ‹¦æˆª &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;https://wx.qq.com/cgi-bin/mmwebwx-bin/webwxnewloginpage&lt;/code&gt; è¿™ä¸ªè¯·æ±‚ï¼Œå¹¶åœ¨è¯·æ±‚å¤´ä¸Šæ·»åŠ ä¸¤ä¸ªå›ºå®šçš„å‚æ•°&lt;/p&gt;

&lt;div class=&quot;language-shell highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;extspam &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;'Gp8ICJkIEpkICggwMDAwMDAwMRAGGoAI1GiJSIpeO1RZTq9QBKsRbPJdi84ropi16EYI10WB6g74sGmRwSNXjPQnYUKYotKkvLGpshucCaeWZMOylnc6o2AgDX9grhQQx7fm2DJRTyuNhUlwmEoWhjoG3F0ySAWUsEbH3bJMsEBwoB//0qmFJob74ffdaslqL+IrSy7LJ76/G5TkvNC+J0VQkpH1u3iJJs0uUYyLDzdBIQ6Ogd8LDQ3VKnJLm4g/uDLe+G7zzzkOPzCjXL+70naaQ9medzqmh+/SmaQ6uFWLDQLcRln++wBwoEibNpG4uOJvqXy+ql50DjlNchSuqLmeadFoo9/mDT0q3G7o/80P15ostktjb7h9bfNc+nZVSnUEJXbCjTeqS5UYuxn+HTS5nZsPVxJA2O5GdKCYK4x8lTTKShRstqPfbQpplfllx2fwXcSljuYi3YipPyS3GCAqf5A7aYYwJ7AvGqUiR2SsVQ9Nbp8MGHET1GxhifC692APj6SJxZD3i1drSYZPMMsS9rKAJTGz2FEupohtpf2tgXm6c16nDk/cw+C7K7me5j5PLHv55DFCS84b06AytZPdkFZLj7FHOkcFGJXitHkX5cgww7vuf6F3p0yM/W73SoXTx6GX4G6Hg2rYx3O/9VU2Uq8lvURB4qIbD9XQpzmyiFMaytMnqxcZJcoXCtfkTJ6pI7a92JpRUvdSitg967VUDUAQnCXCM/m0snRkR9LtoXAO1FUGpwlp1EfIdCZFPKNnXMeqev0j9W9ZrkEs9ZWcUEexSj5z+dKYQBhIICviYUQHVqBTZSNy22PlUIeDeIs11j7q4t8rD8LPvzAKWVqXE+5lS1JPZkjg4y5hfX1Dod3t96clFfwsvDP6xBSe1NBcoKbkyGxYK0UvPGtKQEE0Se2zAymYDv41klYE9s+rxp8e94/H8XhrL9oGm8KWb2RmYnAE7ry9gd6e8ZuBRIsISlJAE/e8y8xFmP031S6Lnaet6YXPsFpuFsdQs535IjcFd75hh6DNMBYhSfjv456cvhsb99+fRw/KVZLC3yzNSCbLSyo9d9BI45Plma6V8akURQA/qsaAzU0VyTIqZJkPDTzhuCl92vD2AD/QOhx6iwRSVPAxcRFZcWjgc2wCKh+uCYkTVbNQpB9B90YlNmI3fWTuUOUjwOzQRxJZj11NsimjOJ50qQwTTFj6qQvQ1a/I+MkTx5UO+yNHl718JWcR3AXGmv/aa9rD1eNP8ioTGlOZwPgmr2sor2iBpKTOrB83QgZXP+xRYkb4zVC+LoAXEoIa1+zArywlgREer7DLePukkU6wHTkuSaF+ge5Of1bXuU4i938WJHj0t3D8uQxkJvoFi/EYN/7u2P1zGRLV4dHVUsZMGCCtnO6BBigFMAA='&lt;/span&gt;
client-version&lt;span class=&quot;s1&quot;&gt;' = '&lt;/span&gt;2.0.0&lt;span class=&quot;s1&quot;&gt;', 
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è¿™æ ·å°±å¯ä»¥å®Œç¾ä½¿ç”¨æ¡Œé¢ç‰ˆåè®®äº†ï¼ŒçœŸçš„æ˜¯éå¸¸æ„Ÿè°¢ &lt;a href=&quot;https://github.com/luvletter2333&quot;&gt;@Luv Letter&lt;/a&gt; çš„è§£é‡Šå’Œ &lt;a href=&quot;https://github.com/https://github.com/artxia&quot;&gt;@artxia&lt;/a&gt; çš„chromeæ’ä»¶ä»£ç è®©æˆ‘æœ‰æœºä¼šä¸º&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;wechaty-puppet-wechat&lt;/code&gt;æ·»ç –åŠ ç“¦&lt;/p&gt;

&lt;h2 id=&quot;å¿«é€Ÿä½“éªŒ&quot;&gt;å¿«é€Ÿä½“éªŒ&lt;/h2&gt;

&lt;p&gt;å¦‚æœæƒ³å¿«é€Ÿä½“éªŒWechayçš„å®Œæ•´åŠŸèƒ½ï¼Œä»¥åŠå¯è§†åŒ–é…ç½®åŠŸèƒ½ï¼Œå¯ä»¥å…³æ³¨æˆ‘çš„ &lt;a href=&quot;https://github.com/gengchen528/wechatBot&quot;&gt;ã€Šå¾®ä¿¡æ¯æ—¥è¯´ã€‹&lt;/a&gt;  å’Œ  &lt;a href=&quot;https://github.com/gengchen528/wechat-assistant-pro&quot;&gt;ã€Šæ™ºèƒ½å¾®ç§˜ä¹¦ã€‹&lt;/a&gt; é¡¹ç›®ï¼Œä»¥ä¸Šé¡¹ç›®å‡å·²æ›´æ–°æœ€æ–°ç‰ˆwebåè®®ï¼Œå…¨éƒ¨æ”¯æŒwebç™»å½•ã€‚&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;å†å²æ–‡ç« &lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://wechaty.js.org/2020/05/31/wechaty-web-panel-plugin/&quot;&gt;wechaty-web-panelå¯è§†åŒ–æ’ä»¶&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://wechaty.js.org/2019/06/21/three-step-get-girlfriend/&quot;&gt;ä¸‰æ­¥æ•™ä½ ç”¨Nodeåšä¸€ä¸ªå¾®ä¿¡è„±å•ç¥å™¨ï¼Œå°ç™½å¯ä¸Šæ‰‹&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>gengchen528</name></author><category term="article" /><category term="code" /><category term="wechaty-puppet-wechat" /><category term="webåè®®" /><category term="news" /><category term="sticky" /><summary type="html">ä½œè€…: Leo_chenï¼Œé«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆï¼Œå–œæ¬¢ä½¿ç”¨nodeåšå„ç§é¡¹ç›®</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-wechaty-uos-web/wechaty-puppet-wechat.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-wechaty-uos-web/wechaty-puppet-wechat.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Goå¼€å‘å¾®ä¿¡ç¾¤èŠäº’åŠ¨æœºå™¨äºº</title><link href="https://wechaty.js.org/2021/04/12/wechat-group-chat-interactive-robot/" rel="alternate" type="text/html" title="Goå¼€å‘å¾®ä¿¡ç¾¤èŠäº’åŠ¨æœºå™¨äºº" /><published>2021-04-12T00:00:00+00:00</published><updated>2021-04-12T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/12/wechat-group-chat-interactive-robot</id><content type="html" xml:base="https://wechaty.js.org/2021/04/12/wechat-group-chat-interactive-robot/">&lt;p&gt;&lt;a href=&quot;https://wechaty.js.org&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Powered%20By-Wechaty-brightgreen.svg&quot; alt=&quot;Powered by Wechaty&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/blueseashore&quot;&gt;blueseashore&lt;/a&gt;
Code: &lt;a href=&quot;https://github.com/blueseashore/wechaty-go&quot;&gt;Github&lt;/a&gt;
Email: 455019825@qq.com&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å…¬å¸å°ç¨‹åºçš„ç›¸å…³é€šçŸ¥éœ€è¦åŠæ—¶ã€å®šæ—¶æ¨é€åˆ°ç›¸å…³çš„ç¾¤ï¼Œç”±äºå¾®ä¿¡webç½‘é¡µç™»å½•åŸºæœ¬å…¨éƒ¨è¢«å°å»ºï¼Œæ‰€æœ‰åœ¨æŸ¥é˜…äº†å¤§é‡å¾®ä¿¡æœºå™¨äººçš„èµ„æ–™åï¼Œé€‰æ‹©äº†wechatyè¿›è¡Œæœºå™¨äººå¼€å‘ï¼Œ
ä»¥æ­¤è¾¾åˆ°ç”¨æˆ·å¯ä»¥é€šè¿‡æŒ‡ä»¤è¿›è¡Œç»‘å®šå¾®ä¿¡ç¾¤ã€æŸ¥è¯¢æ´»åŠ¨ã€æ´»åŠ¨æ¨é€ç­‰åŠŸèƒ½ï¼Œå€Ÿæ­¤æé«˜ç”¨æˆ·ç²˜æ€§ï¼Œæé«˜æ´»åŠ¨çš„è¾¾æˆç‡ã€‚&lt;/p&gt;

&lt;h2 id=&quot;åŠŸèƒ½&quot;&gt;åŠŸèƒ½&lt;/h2&gt;

&lt;p&gt;è‡ªåŠ¨é€šè¿‡å¥½å‹ã€è‡ªåŠ¨åŒæ„å…¥ç¾¤ã€ç»‘å®š/è§£ç»‘å¾®ä¿¡ç¾¤ã€#æ´»åŠ¨æŒ‡ä»¤äº¤äº’ã€æ¶ˆæ¯æ± æ¶ˆæ¯æ¨é€ï¼ˆåŒæ­¥/å¼‚æ­¥ï¼‰ã€å¼‚å¸¸é€€å‡ºç›‘æµ‹å¹¶é‡å¯&lt;/p&gt;

&lt;h2 id=&quot;éƒ¨ç½²ç¯å¢ƒ&quot;&gt;éƒ¨ç½²ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;Go 1.14.6 darwin/amd64ã€Mysql 5.7ã€Redis 6.0&lt;/p&gt;

&lt;h2 id=&quot;è´­ä¹°token&quot;&gt;è´­ä¹°Token&lt;/h2&gt;

&lt;p&gt;[chatToolså¹³å°]è´­ä¹°Token(175.27.139.176/#/order)&lt;/p&gt;

&lt;h2 id=&quot;ä¸‹è½½ä»£ç &quot;&gt;ä¸‹è½½ä»£ç &lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/blueseashore/wechaty-go.git &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;wechaty-go
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;é…ç½®ç¯å¢ƒå˜é‡&quot;&gt;é…ç½®ç¯å¢ƒå˜é‡&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;WEROBOT_TOKEN &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; xxx
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;REDIS_PORT &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; 6379
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;WEROBOT_LOGFILE &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; /tmp/robot.log
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶werobotctlå’Œwerobotd&quot;&gt;ç¼–è¯‘å¯æ‰§è¡Œæ–‡ä»¶werobotctlå’Œwerobotd&lt;/h2&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;go build &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; ./bin/werobotctl
&lt;span class=&quot;nb&quot;&gt;cd &lt;/span&gt;room
go build &lt;span class=&quot;nt&quot;&gt;-o&lt;/span&gt; ../bin/werobotd
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; ../bin
./werobotctl start
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;è¿è¡Œæ•ˆæœ&quot;&gt;è¿è¡Œæ•ˆæœ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechat-group-chat-interactive-robot/start.png&quot; alt=&quot;å¯åŠ¨æ•ˆæœå›¾&quot; /&gt;
&lt;img src=&quot;/assets/2021/04-wechat-group-chat-interactive-robot/bind.png&quot; alt=&quot;æŒ‡ä»¤æ•ˆæœå›¾&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;å…¶ä»–tips&quot;&gt;å…¶ä»–Tips&lt;/h2&gt;

&lt;p&gt;éœ€è¦é…ç½®ç¯å¢ƒå˜é‡ï¼Œéœ€è¦æ›¿æ¢æŒ‡ä»¤åŠŸèƒ½çš„APIåœ°å€&lt;/p&gt;

&lt;h2 id=&quot;æ„Ÿè°¢&quot;&gt;æ„Ÿè°¢&lt;/h2&gt;

&lt;p&gt;æ„Ÿè°¢&lt;a href=&quot;https://wechaty.js.org/&quot;&gt;Wechaty&lt;/a&gt;å›¢é˜Ÿæä¾›å¾®ä¿¡æœºå™¨äººSDKï¼Œè®©å¼€å‘è€…å¯ä»¥ä¸“æ³¨äºä¸šåŠ¡ä»£ç ã€‚
æ„Ÿè°¢&lt;a href=&quot;https://www.juzibot.com&quot;&gt;å¥å­äº’åŠ¨&lt;/a&gt;æä¾›çš„padåè®®ç‰ˆtokenã€‚&lt;/p&gt;</content><author><name>blueseashore</name></author><category term="tutorial" /><category term="golang" /><category term="padplus" /><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-wechat-group-chat-interactive-robot/header.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-wechat-group-chat-interactive-robot/header.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Wechaty Contributor Beijing Meetup 2020/04</title><link href="https://wechaty.js.org/2021/04/05/wechaty-contributor-meetup/" rel="alternate" type="text/html" title="Wechaty Contributor Beijing Meetup 2020/04" /><published>2021-04-05T00:00:00+00:00</published><updated>2021-04-05T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/05/wechaty-contributor-meetup</id><content type="html" xml:base="https://wechaty.js.org/2021/04/05/wechaty-contributor-meetup/">&lt;p&gt;Wechaty Contributor åŒ—äº¬èšé¤&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechaty-contributor-meetup/cheers.jpg&quot; alt=&quot;Photo&quot; /&gt;&lt;/p&gt;

&lt;!--more--&gt;

&lt;p&gt;æ­£å€¼æ¸…æ˜èŠ‚ï¼Œæˆ‘ä»¬ç»„ç»‡äº†ä¸€ä¸ªå°èŒƒå›´çš„ Wechaty Contributor çº¿ä¸‹èšä¼šã€‚
è¯´èµ·æ¥æœ‰äº›å”çªï¼Œå› ä¸ºäº‹å…ˆå¹¶æ²¡æœ‰é¢„çº¦ï¼Œç”±æˆ‘ä¸´æ—¶èµ·æ„é—®å¤§å®¶æœ‰æ²¡æœ‰ç©ºï¼Œæ¯•ç«Ÿ PadLocal å‘å¸ƒä»¥æ¥è¿˜æ²¡æœ‰å’Œç¤¾åŒºå¤§ä½¬ä»¬è§è¿‡é¢ã€‚
ç¼˜åˆ†å°±åœ¨äºï¼Œä¹Ÿå¯èƒ½å› ä¸ºæ”¾å‡çš„ç¼˜æ•…ï¼Œåˆšå¥½å¤§å®¶åˆèƒ½æŠ½å‡ºæ—¶é—´ï¼Œäºæ˜¯èšä¼šæ‰å¾—ä»¥æˆè¡Œã€‚&lt;/p&gt;

&lt;p&gt;æ—©ä¸Š10ç‚¹ï¼Œä¸€è¡ŒäººæŒ‰ç…§çº¦å®šé™†é™†ç»­ç»­åˆ°è¾¾åŒ—äº¬â€œé’æ˜¥çš„å‰å°è…¿â€ CAFEã€‚æ®é«˜åŸè®²ï¼Œè¿™é‡Œæ˜¯ Huan çš„æ ¹æ®åœ°ï¼Œå’Œè€æ¿ç‰¹åˆ«ç†Ÿï¼Œæœ‰å•¥å¥½å–çš„ç›´æ¥é—®ä»–å°±å¯ä»¥ã€‚&lt;/p&gt;

&lt;p&gt;è½åº§ä¸€ç•ªå¯’æš„ï¼Œæ¸ç†Ÿï¼Œå¼€å§‹äº†ä»Šå¤©çš„è®®é¢˜ï¼š&lt;/p&gt;

&lt;ol&gt;
  &lt;li&gt;æˆ‘é¦–å…ˆèŠäº†ä¸€ä¸‹ PadLocal çš„ç¼˜èµ·ï¼Œæˆ‘ä»¬ä¹Ÿæ˜¯å› ä¸ºè‡ªèº«ä¸šåŠ¡éœ€æ±‚æ‰å¼€å§‹æ…¢æ…¢åšçš„ã€‚è¶Šåšè¶Šå‘ç°è¿™é‡Œçš„æŠ€æœ¯ç‰¹åˆ«æœ‰è¶£ï¼ŒåŒæ—¶ä¹Ÿèƒ½å¤Ÿä½“ä¼šåˆ°å¾®ä¿¡å›¢é˜Ÿçš„å¿ƒæ€ï¼Œå¤œæ·±çš„æ—¶å€™å¸¸å¸¸æœ‰ä¸€ç§éš”ç©ºå¯¹è¯çš„æ„Ÿè§‰ï¼Œé‚£ç®€ç›´æ˜¯ä¸€ç§æ·±å…¥çµé­‚çš„äº¤æµã€‚èµ·åˆæˆ‘ä»¬ä¹ŸçŠ¹è±«è¦ä¸è¦å¯¹å¤–å‘å¸ƒ PadLocalï¼Œå‘ç° Wechaty æ˜¯ä¸€ä¸ªç‰¹åˆ«æœ‰æ„ä¹‰çš„ç¤¾åŒºã€‚å¦‚æœæˆ‘ä»¬èƒ½å¤Ÿåœ¨ RPA è¿™ä»¶äº‹ä»¶ä¸Šå¯¹å¤§å®¶æœ‰æ‰€å¸®åŠ©ï¼Œé‚£ä¹Ÿå°±å€¼äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å›¢é˜Ÿçš„åˆå¿ƒæ‰€åœ¨ã€‚&lt;/li&gt;
  &lt;li&gt;èƒ½å’Œè¿™ä¹ˆå¤š Wechaty ç¤¾åŒºå…ƒè€çº§çš„äººç‰©å¯¹è¯ï¼Œå½“ç„¶ä¸èƒ½æ”¾è¿‡è¿™ä¹ˆç»ä½³çš„æœºä¼šã€‚èŠäº†å¾ˆå¤šç¤¾åŒºçš„å†å²ï¼Œä¸€äº›æœ‰æ„æ€çš„ç‚¹æ»´ï¼Œé‚£äº›æœ‰è¶£çš„æˆå‘˜ä»¬ã€‚ä½œä¸ºæ–°äººï¼Œå¯¹è¿™ä¸ªæœ‰çˆ±çš„ç¤¾åŒºæœ‰äº†æ›´åŠ æ·±å…¥çš„è®¤è¯†ã€‚&lt;/li&gt;
  &lt;li&gt;å¤§å®¶è¿˜è°ˆäº†å¾ˆå¤šå¾®ä¿¡ç”Ÿæ€çš„äº‹æƒ…ï¼Œç‰¹åˆ«æ˜¯å¥å­äº’åŠ¨æœ€è¿‘åœ¨åšçš„ä¼ä¸šå¾®ä¿¡ã€‚ä¼ä¸šå¾®ä¿¡å¯èƒ½è¿‘å‡ å¹´æœ€äººæ¿€åŠ¨äººå¿ƒçš„äº§å“ä¹‹ä¸€äº†ï¼Œèƒ½å¤Ÿåœ¨è¿™ä¸ªå¹³å°æ·±è€•ä¸‹å»å¿…å®šæ˜¯ä¸€ä»¶æ„ä¹‰éå‡¡çš„äº‹æƒ…ï¼Œä¹Ÿç¥ç¦å¥å­èƒ½å¤Ÿè¶Šåšè¶Šå¥½ã€‚&lt;/li&gt;
  &lt;li&gt;ä½œä¸º Wechaty åˆ›å§‹äººï¼ŒHuan æœ€è¿‘åœ¨åšå¾ˆå¤šå…³äºç¤¾åŒºå»ºè®¾çš„äº‹æƒ…ï¼Œæ¯”å¦‚æ€ä¹ˆè®© Wechaty çš„æ–‡æ¡£æ›´å¥½ã€‚ä»–æ¨èäº†&lt;a href=&quot;https://documentation.divio.com/&quot;&gt;The documentation system&lt;/a&gt;ï¼Œåˆ†ä¸ºâ€œTUTORIALSâ€ï¼Œâ€œHOW TOâ€ï¼Œâ€œEXPLANATIONâ€ï¼Œ â€œREFERENCEâ€ã€‚æœ‰äº†è¿™ä¸ªé€»è¾‘èƒ½å¤Ÿè®©æ–‡æ¡£ç¼–å†™æ›´åŠ é¡ºç•…ï¼Œè¯»è€…æŸ¥é˜…èµ·æ¥ä¹Ÿæ›´åŠ æ–¹ä¾¿ã€‚å½“è¿™ç¯‡åšå®¢ä¸Šçº¿çš„æ—¶å€™ï¼Œå¤§å®¶å¯ä»¥å»çœ‹ä¸€ä¸‹ WeChaty çš„å®˜ç½‘ï¼Œæ•ˆæœè¿˜æ˜¯ç›¸å½“èµçš„ã€‚BTWï¼Œä¹‹å‰ç¤¾åŒºé‡Œæœ‰äººæŠ±æ€¨ï¼Œâ€œè¿™è¿™è¿™ä¸å¥½é‚£é‚£é‚£ä¸æ»¡æ„â€ï¼ˆå½“ç„¶æ²¡æœ‰æ‰¹è¯„çš„æ„æ€ï¼‰ã€‚ä½†ä¸å…¶æŠ±æ€¨ï¼Œä¸å¦‚ä¹Ÿå‚ä¸è¿›æ¥ï¼Œåªæœ‰è¿™æ ·æˆ‘ä»¬æ‰ä¼šè®©ç¤¾åŒºå˜å¾—æ›´å¥½ã€‚ä½•å†µå¤§å®¶ç°åœ¨èƒ½å¤Ÿä½¿ç”¨åˆ°çš„ Wechatyï¼šâ€œThe Worldâ€™s Shortest ChatBot Code: 6 lines of JavaScript/Java/Pytho/Goâ€¦â€ï¼ŒèƒŒåæ˜¯å¤šå°‘åƒ Huan è¿™æ ·çš„äººè¾›è‹¦ä»˜å‡ºæ‰æœ‰çš„æˆæœã€‚è¿™ä¹Ÿæ¬¡è¿™æ¬¡èšä¼šï¼Œå¯¹æˆ‘æ¥è®²æœ€å¤§çš„ä½“ä¼šä¹‹ä¸€ã€‚&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;èŠäº†æ•´æ•´ä¸€ä¸ªä¸Šåˆï¼Œç›¸è§æ¨æ™šç›¸è°ˆç”šæ¬¢ï¼Œè¿™æ˜¯ä¸€ç¾¤æœ‰ç†æƒ³çš„äººåœ¨åšæœ‰ç†æƒ³çš„äº‹æƒ…ã€‚è‹¥ä¸æ˜¯è‚šé¥¿ï¼Œéƒ½ä¸çŸ¥å‡ æ—¶æ„¿èµ·èº«ã€‚&lt;/p&gt;

&lt;p&gt;æœ€åï¼ŒHuan é—®äº†æˆ‘ä¸€ä¸ªé—®é¢˜ï¼šâ€œä½ æ€ä¹ˆçœ‹ Wechaty ç”¨è‹±æ–‡ä½œä¸ºç¤¾åŒºçš„ä¸»è¦è¯­è¨€ï¼Ÿâ€æˆ‘ç›¸è§†ä¸€ç¬‘ï¼Œç”¨ä¸€å£å€å„¿åœ°é“çš„è€ä¼¦æ•¦è…”å›ç­”é“ï¼šâ€œWe are totally fine with itâ€ã€‚&lt;/p&gt;

&lt;p&gt;è¿™é‡Œä¹Ÿé¢„å‘Šä¸€ä¸‹ï¼Œç­‰æˆ‘ä»¬å¿™å®Œæ‰‹å¤´çš„ä¸€äº›äº‹æƒ…ï¼ŒPadLocal ä¼šç»„ç»‡ä¸€ä¸ª Workshopï¼ŒèŠä¸€èŠå¾®ä¿¡é‚£ç‚¹äº‹ã€‚æ—¶é—´æœ¬æ¥è¯´ 4 æœˆåº•ï¼Œç›®å‰çœ‹èµ·æ¥è¦é¸½äº†ï¼Œæš‚å®š 5 æœˆå§ã€‚ä¸»é¢˜å…ˆä¹°ä¸ªå…³å­ä¸é€éœ²ï¼Œå¯¹ç¤¾åŒºçš„æˆå‘˜æ¥è®²åº”è¯¥æ˜¯ç›¸å½“æœ‰æ„æ€çš„ï¼Œä½ å¯åƒä¸‡ä¸èƒ½é”™è¿‡ã€‚&lt;/p&gt;

&lt;p&gt;ä¸ä¼šè€…ä»‹ç»:&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/huan&quot;&gt;@huan&lt;/a&gt;, &lt;a href=&quot;https://wechaty.js.org/contributors/huan&quot;&gt;Huan LI&lt;/a&gt;, Tencent TVP of Chatbot, &amp;lt;zixia@zixia.net&amp;gt;&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/lijiarui&quot;&gt;@lijiarui&lt;/a&gt;: Full stack developer, serial entrepreneur, Founder &amp;amp; CEO of JuziBot&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/windmemory&quot;&gt;@gaoyuan&lt;/a&gt;: Founder &amp;amp; CTO of JuziBot&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/padlocal&quot;&gt;@padlocal&lt;/a&gt;: Wechaty Padlocal puppet&lt;/p&gt;</content><author><name>padlocal</name></author><category term="story" /><category term="meetup" /><category term="padlocal" /><summary type="html">Wechaty Contributor åŒ—äº¬èšé¤</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-wechaty-contributor-meetup/cheers.jpg" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-wechaty-contributor-meetup/cheers.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">å¾®ä¿¡ç¾¤ä¸­çš„åŠ å¯†è´§å¸æŠ¥ä»·æœºå™¨äºº</title><link href="https://wechaty.js.org/2021/04/01/wechat-group-cryptocurrency-robot/" rel="alternate" type="text/html" title="å¾®ä¿¡ç¾¤ä¸­çš„åŠ å¯†è´§å¸æŠ¥ä»·æœºå™¨äºº" /><published>2021-04-01T00:00:00+00:00</published><updated>2021-04-01T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/04/01/wechat-group-cryptocurrency-robot</id><content type="html" xml:base="https://wechaty.js.org/2021/04/01/wechat-group-cryptocurrency-robot/">&lt;p&gt;&lt;a href=&quot;https://wechaty.js.org&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Powered%20By-Wechaty-brightgreen.svg&quot; alt=&quot;Powered by Wechaty&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/heygum&quot;&gt;heygum&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;èƒŒæ™¯&quot;&gt;èƒŒæ™¯&lt;/h2&gt;

&lt;p&gt;å½“ä»Šæ­£æ—¶å¤§ç‰›å¸‚ (æˆ–è€…ç‰›å¿«ç»“æŸäº†), åœ¨å¾ˆå¤šæ—¶å€™å¹¶æ²¡æœ‰åŠæ³•æ‰“å¼€Appè½¯ä»¶çœ‹å¸ä»·, æ¯”å¦‚åœ¨ä¸Šè¯¾çš„æ—¶å€™, åœ¨ä¸Šç­æ‘¸é±¼çš„æ—¶å€™, åœ¨åœ°é“ä¸Šçš„æ—¶å€™, æ‰€ä»¥åœ¨å¾®ä¿¡ç¾¤ä¸­,æŸ¥è¯¢è‡ªå·±æ‰€éœ€è¦çš„å¸çš„ä»·æ ¼æ˜¯å¾ˆæœ‰å¿…è¦çš„.&lt;/p&gt;

&lt;h2 id=&quot;éƒ¨ç½²ç¯å¢ƒ&quot;&gt;éƒ¨ç½²ç¯å¢ƒ&lt;/h2&gt;

&lt;p&gt;Node.js12+ (ç›®å‰ä¸è¦ä¸Š15çš„è½¦)&lt;/p&gt;

&lt;p&gt;TypeScript&lt;/p&gt;

&lt;p&gt;qrcode-terminal
wechaty
wechaty-puppet-padlocal&lt;/p&gt;

&lt;p&gt;åœ¨æ­¤é¡¹ç›®ä¸­, ç›®å‰ä½¿ç”¨çš„æ˜¯å…è´¹æ— é™åˆ¶çš„éå°å·API, å¤§è‡´èƒ½ç”¨, æ²¡ä¸ŠäºŒçº¿äº¤æ˜“æ‰€ä»¥ä¸Šçš„å¸ä¸€èˆ¬æ²¡æœ‰.&lt;/p&gt;

&lt;p&gt;æœ¬äººè¿è¡Œç¯å¢ƒ Debian 10.&lt;/p&gt;

&lt;h2 id=&quot;å®ç°&quot;&gt;å®ç°&lt;/h2&gt;

&lt;p&gt;åˆšå¼€å§‹ä½¿ç”¨å°è¯•çš„æ˜¯pythonå®ç°,åæ¥é‡åˆ°äº†è¿æ¥ä¸ä¸Šçš„é—®é¢˜(æ­äº†gatewayä¹Ÿè¿ä¸ä¸Š), åé¢ä½¿ç”¨Typescriptå®ç°æ—¶å†æ¬¡é‡åˆ°äº†è¿æ¥ä¸ä¸Šçš„é—®é¢˜.&lt;/p&gt;

&lt;p&gt;åé¢å‘ç°æ˜¯æœåŠ¡å™¨çš„é—®é¢˜, å»ºè®®ç”¨æœåŠ¡å™¨:&lt;/p&gt;

&lt;div class=&quot;language-sh highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;ping gateway.pad-local.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;å°è¯•èƒ½ä¸èƒ½pingé€š.&lt;/p&gt;

&lt;p&gt;åœ¨æ­¤é¡¹ç›®ä¸­,å¤§è‡´æ¡†æ¶å€Ÿé‰´çš„æ˜¯ &lt;a href=&quot;https://github.com/padlocal/wechaty-puppet-padlocal-demo&quot;&gt;wechaty-puppet-padlocal-demo&lt;/a&gt;, åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹,åœ¨éƒ¨ç½²æ—¶å¯ä»¥å…ˆæŒ‰ç€Demoè¿›è¡Œæ“ä½œ.&lt;/p&gt;

&lt;p&gt;Demoä½¿ç”¨æ²¡é—®é¢˜æ—¶, ä¾¿å¯ä»¥è¿›è¡ŒäºŒæ¬¡ä¿®æ”¹.&lt;/p&gt;

&lt;div class=&quot;language-js highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;// coinBot.ts&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PuppetPadlocal&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;wechaty-puppet-padlocal&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;k&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Wechaty&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;wechaty&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;puppet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;PuppetPadlocal&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;token&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;puppet_padlocal_yourTokenHere&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è¾“å…¥ä½ çš„token.&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt; 

&lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Wechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;({&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;name&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;scan&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;===&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;Waiting&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;qrcodeImageUrl&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;
                &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://wechaty.js.org/qrcode/&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;nb&quot;&gt;encodeURIComponent&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;''&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

            &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`onScan: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;) - &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcodeImageUrl&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;

            &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;qrcode-terminal&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;generate&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;small&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// show qrcode on console&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`onScan: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;)`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;login&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; login`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;logout&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;string&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;user&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt; logout, reason: &lt;/span&gt;&lt;span class=&quot;p&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;reason&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;includes&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.-&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)){&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œçš„ååº”å‰ç¼€å¯ä»¥æ ¹æ®éœ€æ±‚ä¿®æ”¹&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// æ‰“å°ä¸€ä¸‹ååº”çš„Text.&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s1&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;text&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;split&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)[&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;];&lt;/span&gt; 
            &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;coinBot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;member&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;talker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;room&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;say&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toString&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;());&lt;/span&gt;
                &lt;span class=&quot;nx&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;room&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;say&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;æ²¡è¿™å¸&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;member&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;    
        &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

    &lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;on&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;on error: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;stack&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;})&lt;/span&gt;

&lt;span class=&quot;nx&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;then&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&amp;gt;&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;nx&quot;&gt;log&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;TestBot&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;started.&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;});&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;function&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;coinBot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;){&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;require&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;request-promise&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;requestOptions&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;method&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;GET&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;uri&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;https://fxhapi.feixiaohao.com/public/v1/ticker&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;// è¿™é‡Œä½¿ç”¨çš„éå°å·çš„API&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;qs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;start&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;limit&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;5000&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;//éå°å·æœ€é«˜æ•°æ®5000&lt;/span&gt;
    &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;convert&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;s1&quot;&gt;USD&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;},&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
    &lt;span class=&quot;na&quot;&gt;gzip&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;};&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;let&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;rp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;requestOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kd&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;].&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;toLowerCase&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;s1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;[å¸ç§]: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;`\n`&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;[ä»·æ ¼]: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;price_usd&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt;&lt;span class=&quot;se&quot;&gt;\n&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;'&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;[24å°æ—¶æ¶¨å¹…]: &lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nx&quot;&gt;each&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;][&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;percent_change_24h&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;%&lt;/span&gt;&lt;span class=&quot;dl&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;nx&quot;&gt;result&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;;&lt;/span&gt;
&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;è¿è¡Œæ•ˆæœ&quot;&gt;è¿è¡Œæ•ˆæœ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/04-wechat-group-cryptocurrency-robot/result.png&quot; alt=&quot;æ•ˆæœå›¾&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;è‡´è°¢&quot;&gt;è‡´è°¢&lt;/h2&gt;

&lt;p&gt;è°¢è°¢Wechatyå›¢é˜Ÿâ€˜å¥½å¤§â€™çš„æŒ‡å¯¼.&lt;/p&gt;</content><author><name>heygum</name></author><category term="tutorial" /><category term="cryptocurrency" /><category term="padplus" /><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/04-wechat-group-cryptocurrency-robot/header.jpg" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/04-wechat-group-cryptocurrency-robot/header.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">ä½¿ç”¨wechatyæé†’åŠ å¯†è´§å¸è¡Œæƒ…</title><link href="https://wechaty.js.org/2021/03/31/wechaty-cryptocurrency-websocket/" rel="alternate" type="text/html" title="ä½¿ç”¨wechatyæé†’åŠ å¯†è´§å¸è¡Œæƒ…" /><published>2021-03-31T00:00:00+00:00</published><updated>2021-03-31T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/03/31/wechaty-cryptocurrency-websocket</id><content type="html" xml:base="https://wechaty.js.org/2021/03/31/wechaty-cryptocurrency-websocket/">&lt;p&gt;&lt;a href=&quot;https://wechaty.js.org&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/Powered%20By-Wechaty-brightgreen.svg&quot; alt=&quot;Powered by Wechaty&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;ä½œè€…: &lt;a href=&quot;https://github.com/r-hou&quot;&gt;r-hou&lt;/a&gt;ï¼Œå­¦ç”Ÿï¼ŒåŠ å¯†è´§å¸çˆ±å¥½è€…ã€‚&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/r-hou/wechaty-cryptocurrency-websocket&quot;&gt;&lt;img src=&quot;/assets/2021/03-wechaty-cryptocurrency-websocket/wechaty-btc.jpg&quot; alt=&quot;Wechaty-Cryptocurrency-Notification&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;!-- more --&gt;
&lt;p&gt;ä»2020å¹´3æœˆä»½ä»¥æ¥ï¼ŒåŠ å¯†è´§å¸å¸‚åœºéšç€ç–«æƒ…å¯¼è‡´çš„å…¨çƒå¤§æ”¾æ°´è€Œé£é€Ÿæ‰©å¼ ï¼ŒBTCçš„ä»·æ ¼ä»ä½ç‚¹$3800æ¶¨åˆ°äº†æœ€é«˜$60000ï¼Œ åå‡ å€çš„æ¶¨å¹…å¸å¼•äº†å…¨çƒè¶Šæ¥è¶Šå¤šçš„ä¸ªäººå’Œæœºæ„æŠ•èµ„è€…å‚ä¸åˆ°è¿™ä¸ªå¸‚åœºã€‚ è¿™ä¸ª7x24å°æ—¶çš„å¸‚åœºç¬æ¯ä¸‡å˜ï¼Œä¸Šä¸‹å‡ ä¸ªç‚¹ç”šè‡³å‡ åä¸ªç‚¹çš„æ³¢åŠ¨å¸¸å¸¸åœ¨åå‡ åˆ†é’Ÿç”šè‡³å‡ åˆ†é’Ÿä¹‹å†…å°±èƒ½å®Œæˆï¼Œè¿™ä¹ˆå¤§çš„æ³¢åŠ¨åœ¨ç»™æŠ•èµ„è€…å¸¦æ¥ä¸°åšå›æŠ¥çš„åŒæ—¶ä¹Ÿä¼´éšç€å·¨å¤§çš„é£é™©ã€‚ä½œä¸ºä¸€åä¸ªäººæŠ•èµ„è€…ï¼Œéå¸¸å¸Œæœ›èƒ½å¤ŸåŠæ—¶å¾—åˆ°è™šæ‹Ÿè´§å¸ä»·æ ¼çš„å˜åŠ¨æƒ…å†µè€Œè¿›è¡Œäº¤æ˜“ã€‚&lt;/p&gt;

&lt;p&gt;å› æ­¤, æˆ‘éå¸¸å¸Œæœ›å»ºç«‹ä¸€ä¸ªè‡ªåŠ¨åŒ–æœºå™¨äººï¼Œåœ¨è¡Œæƒ…æ³¢åŠ¨å·¨å¤§çš„æ—¶å€™åŠæ—¶å‘å‡ºæé†’ã€‚ç›®å‰ï¼Œå¸‚é¢ä¸Šæœ‰å„ç§å„æ ·çš„æ¥å£æä¾›äº†æ¶ˆæ¯æ¨é€ï¼Œæ¯”å¦‚é’‰é’‰ï¼Œsparkï¼Œ IFTTTï¼Œ telegramç­‰ç­‰. ä½†æ˜¯ï¼Œæ¯ä¸ªäººæ‰‹æœºé‡Œå„ç§å„æ ·çš„æ¶ˆæ¯æ¨é€å¸¸å¸¸è®©äººåº”æ¥ä¸æš‡ã€‚è€Œå¾®ä¿¡ï¼Œä½œä¸ºæœ€å¹¿æ³›ä½¿ç”¨çš„èŠå¤©å·¥å…·ï¼Œé²œæœ‰äººé”™è¿‡é˜…è¯»å¾®ä¿¡æ¶ˆæ¯ã€‚ æ‰€ä»¥ï¼Œæˆ‘æ‰“ç®—é€šè¿‡å¾®ä¿¡æœºå™¨äººæ¥è¿›è¡Œæ¶ˆæ¯æ¨é€ã€‚é€šè¿‡æœç´¢ï¼Œäº†è§£åˆ°ç›®å‰å¸‚åœºçš„æ¶ˆæ¯æœºå™¨äººæœ‰itchatï¼Œ wxpyï¼Œwechatyç­‰ç­‰ã€‚å¯æ˜¯éšç€è…¾è®¯æ–½åŠ å‹åŠ›ï¼ŒåŸºäºwebå¾®ä¿¡çš„itchatå’Œwxpyæ— æ³•ä½¿ç”¨ã€‚è€Œwechatyæ”¯æŒå¤šç§åè®®ï¼Œæ¯”webåè®®æ›´åŠ å®‰å…¨ï¼Œäºæ˜¯å†³å®šé‡‡ç”¨wechatyåŸºäºipadåè®® ( padLocal ) æ¥æ­å»ºæœºå™¨äººã€‚&lt;/p&gt;

&lt;p&gt;è®©æˆ‘ä»¬è¿›å…¥æ­£é¢˜ï¼&lt;/p&gt;

&lt;h2 id=&quot;ç¯å¢ƒå’Œä¾èµ–&quot;&gt;ç¯å¢ƒå’Œä¾èµ–&lt;/h2&gt;

&lt;p&gt;python
aiohttp
asyncio
wechaty&lt;/p&gt;

&lt;h2 id=&quot;wechaty-puppet-hostieéƒ¨ç½²&quot;&gt;Wechaty Puppet Hostieéƒ¨ç½²ï¼š&lt;/h2&gt;

&lt;p&gt;å› ä¸ºåŸç”Ÿçš„wechatyæ˜¯åŸºäºJavaScriptå’ŒTypeScriptå†™çš„ï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡dockeræ­å»ºWechaty Puppet Hostie æœåŠ¡ä½œä¸ºä¸­è½¬ï¼Œ ä»è€Œå¯ä»¥é€šè¿‡pythonè°ƒç”¨ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;éƒ¨ç½²å‰ç½®å‡†å¤‡:&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;ä¸€ä¸ªæ»¡è¶³ä»¥ä¸‹ä¸‰ç‚¹è¦æ±‚çš„æœåŠ¡å™¨ï¼š&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Public IP
Public Port
Docker&lt;/p&gt;
&lt;/blockquote&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;éƒ¨ç½²Wechaty Puppet Hostie&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;å…·ä½“ä»£ç å¦‚ä¸‹ï¼ˆæœ¬äººæœåŠ¡å™¨ä¸º Ununtu 18.04ï¼‰&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c&quot;&gt;#! /usr/bin/bash&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_LOG&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;verbose&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;wechaty-puppet-padlocal&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_PADLOCAL_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;puppet_padlocal__TOKEN__&quot;&lt;/span&gt;

&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;9001&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;export &lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;WECHATY_TOKEN&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;curl &lt;span class=&quot;nt&quot;&gt;-s&lt;/span&gt; https://www.uuidgenerator.net/api/version4&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--name&lt;/span&gt; wechaty_puppet_service_token_gateway &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;--rm&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_LOG &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET_PADLOCAL_TOKEN &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_PUPPET_SERVER_PORT &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-e&lt;/span&gt; WECHATY_TOKEN &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$WECHATY_PUPPET_SERVER_PORT&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; &lt;span class=&quot;se&quot;&gt;\&lt;/span&gt;
  wechaty/wechaty
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;ä»£ç ä¸­çš„WECHATY_PUPPET_PADLOCAL_TOKENæ˜¯éœ€è¦å‘å®˜æ–¹ç”³è¯·ï¼Œå¯ä»¥å¾—åˆ°çš„ä¸€ä¸ªå¯ä»¥è¯•ç”¨7å¤©çš„tokenï¼Œåç»­é€šè¿‡ç¤¾åŒºçš„æ¿€åŠ±è®¡åˆ’ï¼Œè¿˜å¯ä»¥å…è´¹è·å¾—æ—¶æ•ˆæ›´é•¿çš„tokenã€‚&lt;a href=&quot;https://wechaty.js.org/docs/contributor-program/&quot;&gt;è¯¦æƒ…å‚è§è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;strong&gt;éªŒè¯Wechaty Puppet Hostie&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;è®¿é—® &lt;a href=&quot;https://api.chatie.io/v0/hosties/WECHATY_TOKEN&quot;&gt;https://api.chatie.io/v0/hosties/WECHATY_TOKEN&lt;/a&gt; ï¼Œå…¶ä¸­WECHATY_TOKENæ˜¯æŒ‡ä½ åˆšåˆšè‡ªè¡Œè®¾å®šçš„Tokenï¼Œå½“è¿”å›ç»“æœä¸ºæœåŠ¡å™¨çš„Public IPæ—¶åˆ™è¯´æ˜éƒ¨ç½²æˆåŠŸï¼Œä¸º0.0.0.0æ—¶åˆ™è¯´æ˜éƒ¨ç½²å¤±è´¥~&lt;/p&gt;

&lt;h2 id=&quot;é¡¹ç›®æ€è·¯&quot;&gt;é¡¹ç›®æ€è·¯&lt;/h2&gt;

&lt;p&gt;æ­å»ºå®Œä¸­è½¬æœåŠ¡ï¼Œç°åœ¨æˆ‘ä»¬éœ€è¦é›†ä¸­æ³¨æ„åŠ›åœ¨éœ€æ±‚å’Œæœºå™¨äººçš„æ­å»ºä¸Šé¢ã€‚å¸‚åœºè¡Œæƒ…æ•°æ®æ¥æºäºå›½å†…ä¸‰å¤§äº¤æ˜“æ‰€ä¹‹ä¸€&lt;a href=&quot;https://binance.com/&quot;&gt;å¸å®‰&lt;/a&gt;ã€‚ä¸ºäº†è·å¾—æ›´åŠ åŠæ—¶çš„æ•°æ®ï¼Œæˆ‘å†³å®šé‡‡ç”¨websocketæ¥æ­å»ºæˆ‘ä»¬çš„æœåŠ¡ã€‚å…³äºæœºå™¨äººæ–¹é¢ï¼Œæˆ‘è¯»äº†å®˜æ–¹examplesé‡Œé¢çš„ä»£ç å‘ç°æœºå™¨äººéƒ½æ˜¯ç»§æ‰¿WechatyåŸºç±»æ¥é€šè¿‡è‡ªå®šä¹‰å›è°ƒå‡½æ•°æ¥å®ç°å„ç§åŠŸèƒ½ã€‚åˆ©ç”¨äº‹ä»¶é©±åŠ¨çš„å›è°ƒå‡½æ•°è¿™æ ·æ˜¯å¾ˆè¢«åŠ¨çš„ï¼Œè€Œæˆ‘æƒ³å¾—åˆ°ä¸€ä¸ªå¯ç›´æ¥è°ƒç”¨çš„Wechatyå¯¹è±¡ï¼Œä¸é€šè¿‡start()å‡½æ•°è¿›å…¥äº‹ä»¶å¾ªç¯ç›‘å¬, è€Œå¯ä»¥ä¸»åŠ¨çš„å‘é€ä¿¡æ¯ã€‚ç»è¿‡ä¸€å¤©çš„é˜…è¯»ä»£ç å’Œè‡ªæˆ‘æ‘¸ç´¢ï¼Œç»ˆäºå®ç°äº†åˆ›å»ºä¸€ä¸ªå¯ä»¥ç›´æ¥è°ƒç”¨çš„æœºå™¨äººå¯¹è±¡ï¼Œç¨åè¯·å‚è€ƒè¯¦ç»†ä»£ç ï¼Œå…¶ä¸­æœ€é‡è¦çš„è¿˜æ˜¯éœ€è¦è¿›å…¥äº‹ä»¶ç›‘å¬ï¼Œç„¶ååœ¨ç›‘å¬åˆ°æˆåŠŸç™»å½•çš„äº‹ä»¶ä»¥åï¼Œä¸­æ–­ç›‘å¬ï¼Œè¿”å›å·²ç»ç™»å½•å¥½çš„æœºå™¨äººå¯¹è±¡ï¼Œ ä»è€Œå®ç°ç›´æ¥è°ƒç”¨ã€‚&lt;/p&gt;

&lt;p&gt;é¦–å…ˆæˆ‘ä»¬å»ºç«‹WebsocketåŸºç±», å¹¶ä¸”å»ºç«‹HeartBeatç±»æ¥å®šæœŸæ‰§è¡ŒæŸäº›ä»»åŠ¡ï¼Œæ¯”å¦‚æ£€æŸ¥websocketè¿é€šæ€§å¹¶æ–­çº¿é‡è¿ç­‰ç­‰ã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;c1&quot;&gt;#websocketAPI.py
&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logging&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;aiohttp&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Websocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; websocketæ¥å£å°è£…
    &quot;&quot;&quot;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_conn_interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;send_hb_interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; åˆå§‹åŒ–
        @param url å»ºç«‹websocketçš„åœ°å€
        @param check_conn_interval æ£€æŸ¥websocketè¿æ¥æ—¶é—´é—´éš”
        @param send_hb_interval å‘é€å¿ƒè·³æ—¶é—´é—´éš”ï¼Œå¦‚æœæ˜¯0å°±ä¸å‘é€å¿ƒè·³æ¶ˆæ¯
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;url&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_check_conn_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;check_conn_interval&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_send_hb_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;send_hb_interval&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# websocketè¿æ¥å¯¹è±¡
&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; åˆå§‹åŒ–
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# æ³¨å†ŒæœåŠ¡ æ£€æŸ¥è¿æ¥æ˜¯å¦æ­£å¸¸
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æ³¨å†ŒæœåŠ¡ æ£€æŸ¥è¿æ¥æ˜¯å¦æ­£å¸¸&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;heartbeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_check_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_check_conn_interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# æ³¨å†ŒæœåŠ¡ å‘é€å¿ƒè·³
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;æ³¨å†ŒæœåŠ¡ å‘é€å¿ƒè·³&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# å»ºç«‹websocketè¿æ¥
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;å»ºç«‹websocketè¿æ¥&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;url:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# print(&quot;proxy:&quot;,proxy)
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClientSession&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autoping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# print(self.ws)
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;as&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ERROR:{},{}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__class__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;session&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;timeout&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;autoping&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;client_exceptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ClientConnectorError&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;connect to server error! url:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;connected_callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_reconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; é‡æ–°å»ºç«‹websocketè¿æ¥
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;reconnecting websocket right now!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_connect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;connected_callback&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; è¿æ¥å»ºç«‹æˆåŠŸçš„å›è°ƒå‡½æ•°
        * NOTE: å­ç±»ç»§æ‰¿å®ç°
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;pass&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;receive&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; æ¥æ”¶æ¶ˆæ¯
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WSMsgType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;TEXT&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;except&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WSMsgType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;BINARY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;process_binary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WSMsgType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;CLOSED&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;receive event CLOSED:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_reconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;aiohttp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WSMsgType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ERROR&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;receive event ERROR:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;unhandled msg:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å¤„ç†websocketä¸Šæ¥æ”¶åˆ°çš„æ¶ˆæ¯ text ç±»å‹
        * NOTE: å­ç±»ç»§æ‰¿å®ç°
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NotImplementedError&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process_binary&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å¤„ç†websocketä¸Šæ¥æ”¶åˆ°çš„æ¶ˆæ¯ binaryç±»å‹
        * NOTE: å­ç±»ç»§æ‰¿å®ç°
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;raise&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;NotImplementedError&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_check_connection&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; æ£€æŸ¥è¿æ¥æ˜¯å¦æ­£å¸¸
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# æ£€æŸ¥websocketè¿æ¥æ˜¯å¦å…³é—­ï¼Œå¦‚æœå…³é—­ï¼Œé‚£ä¹ˆç«‹å³é‡è¿
&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# print(self.ws)
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;websocket connection not connected yet!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;closed&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_reconnect&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_send_heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å‘é€å¿ƒè·³ç»™æœåŠ¡å™¨
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;websocket connection not connected yet!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ws&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;send heartbeat msg failed! heartbeat msg:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;send ping message:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;heartbeat_msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;HeartBeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;object&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å¿ƒè·³
    &quot;&quot;&quot;&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# å¿ƒè·³æ¬¡æ•°
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æœåŠ¡å¿ƒè·³æ‰§è¡Œæ—¶é—´é—´éš”(ç§’)
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_print_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# å¿ƒè·³æ‰“å°æ—¶é—´é—´éš”(ç§’)ï¼Œ0ä¸ºä¸æ‰“å°
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tasks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# è·Ÿéšå¿ƒè·³æ‰§è¡Œçš„å›è°ƒä»»åŠ¡åˆ—è¡¨ï¼Œç”± self.register æ³¨å†Œ {task_id: {...}}
&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;@&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;property&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;ticker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å¯åŠ¨å¿ƒè·³ï¼Œ æ¯ç§’æ‰§è¡Œä¸€æ¬¡
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# æ‰“å°å¿ƒè·³æ¬¡æ•°
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_print_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_print_interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;do server heartbeat, count:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# è®¾ç½®ä¸‹ä¸€æ¬¡å¿ƒè·³å›è°ƒ
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;call_later&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ticker&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

        &lt;span class=&quot;c1&quot;&gt;# æ‰§è¡Œä»»åŠ¡å›è°ƒ
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;items&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;interval&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;%&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;0&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;continue&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;func&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;kwargs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;task_id&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;heart_beat_count&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_count&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;create_task&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;register&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;1&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; æ³¨å†Œä¸€ä¸ªä»»åŠ¡ï¼Œåœ¨æ¯æ¬¡å¿ƒè·³çš„æ—¶å€™æ‰§è¡Œè°ƒç”¨
        @param func å¿ƒè·³çš„æ—¶å€™æ‰§è¡Œçš„å‡½æ•°
        @param interval æ‰§è¡Œå›è°ƒçš„æ—¶é—´é—´éš”(ç§’)
        @return task_id ä»»åŠ¡id
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;func&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;func&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;interval&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;interval&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;args&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;args&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
            &lt;span class=&quot;s&quot;&gt;&quot;kwargs&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kwargs&lt;/span&gt;
        &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;websocket_task&quot;&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;t&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;unregister&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; æ³¨é”€ä¸€ä¸ªä»»åŠ¡
        @param task_id ä»»åŠ¡id
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_tasks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;task_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;


&lt;span class=&quot;n&quot;&gt;heartbeat&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;HeartBeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;æ¥ç€é€šè¿‡å¸å®‰æä¾›çš„websocket APIæ¥æ‹‰å–è¡Œæƒ…ã€‚ å› æ­¤æˆ‘ä»¬æ–°å»ºä¸€ä¸ªBinanceçš„å­ç±»æ¥ç»§æ‰¿Websocketç±»ï¼Œå¹¶ä¸”åœ¨Binanceä¸­å®ç°æœºå™¨äººã€‚&lt;/p&gt;

&lt;div class=&quot;language-python highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;asyncio&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;json&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;datetime&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;datetime&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;os&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;traceback&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;aiohttp&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WechatyPlugin&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Room&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;WechatyOptions&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty_puppet_service&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty_puppet&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PuppetOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EventType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EventScanPayload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EventLoginPayload&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty_puppet.schemas.room&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;RoomQueryFilter&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;wechaty_puppet.schemas.contact&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ContactQueryFilter&lt;/span&gt;

&lt;span class=&quot;kn&quot;&gt;from&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;websocketAPI&lt;/span&gt; &lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;heartbeat&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Websocket&lt;/span&gt;
&lt;span class=&quot;kn&quot;&gt;import&lt;/span&gt; &lt;span class=&quot;nn&quot;&gt;logger&lt;/span&gt;



&lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'acfbbe16-5f80-4a61-a755-85c27c3f5511'&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'wechaty-puppet-service'&lt;/span&gt;

&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;environ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'WECHATY_PUPPET_SERVICE_TOKEN'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/span&gt;
&lt;span class=&quot;n&quot;&gt;os&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;environ&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'WECHATY_PUPPET'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET&lt;/span&gt;



&lt;span class=&quot;k&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;nc&quot;&gt;Binance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Websocket&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
    &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; Binance è¡Œæƒ…
    &quot;&quot;&quot;&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_wechat_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_platform&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;BINANCE&quot;&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;wss://stream.binance.com:9443&quot;&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbols&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'BTC/USDT'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;#å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ å…³å¿ƒçš„äº¤æ˜“å¯¹
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_channels&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'kline'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#è¡Œæƒ…æ•°æ®ï¼Œæä¾›klineï¼Œtradeå’Œorderbookä¸‰ç§è¡Œæƒ…
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_c_to_s&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# {&quot;channel&quot;: &quot;symbol&quot;}
&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_wechat_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;to_wechat_id&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;#è¢«å‘é€äººçš„å¾®ä¿¡idï¼Œä¹Ÿå¯ä»¥æ˜¯ç¾¤idï¼Œä¸è¿‡éœ€è¦æ›´æ”¹ self.send_notificationå‡½æ•°
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wechaty&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run_until_complete&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init_wechat_bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;())&lt;/span&gt;

        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_make_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;nb&quot;&gt;super&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Binance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;__init__&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;initialize&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;

        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;volatility_threshold&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mf&quot;&gt;0.0001&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æ³¢åŠ¨å¤§äº 0.01%çš„æ—¶å€™å‘å‡ºæé†’
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kline_init&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_timestamp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# ä¸Šä¸€ä¸ªevent kçº¿çš„timestamp
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# å½“å‰event kçº¿çš„timestamp
&lt;/span&gt;        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sent_notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{}&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# åˆ¤æ–­å½“å‰kçº¿æ˜¯å¦å·²ç»å‘é€äº†é€šçŸ¥
&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;init_wechat_bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# åœ¨è¿™ä¸ªå‡½æ•°é‡Œé¢ï¼Œæˆ‘ä»¬åˆå§‹åŒ–äº†å¯ä»¥ç›´æ¥è°ƒç”¨çš„æœºå™¨äººå¯¹è±¡
&lt;/span&gt;        &lt;span class=&quot;n&quot;&gt;puppet_options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;PuppetOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;puppet_options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;token&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET_SERVICE_TOKEN&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WechatyOptions&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;WECHATY_PUPPET&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet_options&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;puppet_options&lt;/span&gt;

        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Wechaty&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;options&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init_puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;init_puppet_event_bridge&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_init_puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet_stub&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;event&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;():&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;#åˆå§‹åŒ–puppetä»¥åï¼Œè¿›å…¥äº‹ä»¶ç›‘å¬
&lt;/span&gt;            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;is&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;json&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;loads&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EVENT_TYPE_SCAN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# è¿”å›äºŒç»´ç äº‹ä»¶
&lt;/span&gt;                    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'receive scan info &amp;lt;%s&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;c1&quot;&gt;# create qr_code
&lt;/span&gt;                    &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EventScanPayload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;status&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ScanStatus&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'status'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]),&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;qrcode&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'qrcode'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'scan payload_data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_event_stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'scan'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

                &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;response&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;type&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;int&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EventType&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;EVENT_TYPE_LOGIN&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;c1&quot;&gt;# ç™»å½•äº‹ä»¶ï¼Œåœ¨ç™»å½•ä»¥å
&lt;/span&gt;                    &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'receive login info &amp;lt;%s&amp;gt;'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'login payload_data'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;event_login_payload&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;EventLoginPayload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;
                        &lt;span class=&quot;n&quot;&gt;contact_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'contactId'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
                    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;login_user_id&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;payload_data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'contactId'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;None&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;puppet&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_event_stream&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;emit&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'login'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;event_login_payload&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;k&quot;&gt;break&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;send_message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;contact&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bot&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;find&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_wechat_id&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# å‘é€åˆ°è”ç³»äºº
&lt;/span&gt;        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;contact&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;say&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;c1&quot;&gt;# room = await self.bot.Room.find(self.to_wechat_id)  # å‘é€åˆ°ç¾¤
&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;# if room:
&lt;/span&gt;        &lt;span class=&quot;c1&quot;&gt;#     await room.say(message)
&lt;/span&gt;
    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_make_url&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; æ‹¼æ¥è¯·æ±‚url
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;cc&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_channels&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kline&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# è®¢é˜…Kçº¿ 1åˆ†é’Ÿ
&lt;/span&gt;                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbol_to_channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kline_5m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;cc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;orderbook&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# è®¢é˜…è®¢å•è–„ æ·±åº¦ä¸º5
&lt;/span&gt;                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbol_to_channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;depth20&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;cc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;trade&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# è®¢é˜…å®æ—¶äº¤æ˜“
&lt;/span&gt;                &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbols&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;c&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_symbol_to_channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;trade&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                    &lt;span class=&quot;n&quot;&gt;cc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;c&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;channel error! channel:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ch&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_url&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/stream?streams=&quot;&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;+&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;join&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;cc&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;async&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;process&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; å¤„ç†websocketä¸Šæ¥æ”¶åˆ°çš„æ¶ˆæ¯
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;print&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;debug&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;msg:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;isinstance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;dict&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;stream&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_c_to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;warn&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;unkown channel, msg:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_c_to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;data&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;e&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# äº‹ä»¶åç§°
&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kline&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# Kçº¿
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;kline&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;platform&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;symbol&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;open&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;o&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# å¼€ç›˜ä»·
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;high&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;h&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æœ€é«˜ä»·
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;low&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æœ€ä½ä»·
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;close&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;c&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æ”¶ç›˜ä»·
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;volume&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;q&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# äº¤æ˜“é‡
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# æ—¶é—´æˆ³
&lt;/span&gt;                &lt;span class=&quot;s&quot;&gt;&quot;kline_type&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;const&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MARKET_TYPE_KLINE&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;c1&quot;&gt;# print(&quot;symbol:&quot;, symbol, &quot;kline:&quot;, kline)
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;symbol:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kline:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;endswith&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;depth20&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# è®¢å•è–„
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;bids&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;asks&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;[]&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;bids&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;bids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;bid&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;for&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;asks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;asks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;append&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;ask&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[:&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;])&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;orderbook&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;platform&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BINANCE&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;symbol&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;asks&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asks&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;bids&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;bids&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;tools&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_cur_timestamp_ms&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;symbol:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;orderbook:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;orderbook&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kline_init&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_timestamp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;t&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sent_notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;kline_init&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;!=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;last_timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sent_notification&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;False&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;

            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;symbol:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;kline:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;kline&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;low&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;h&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)),&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;float&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;k&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;l&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;volatility&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;-&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;low&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;/&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;high&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;volatility&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;volatility_threshold&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;and&lt;/span&gt; &lt;span class=&quot;ow&quot;&gt;not&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sent_notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]:&lt;/span&gt;
                &lt;span class=&quot;k&quot;&gt;await&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;send_message&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;{} 5åˆ†é’Ÿå†…æ³¢å¹…è¾¾åˆ°{:.4f}%!&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;volatility&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;mi&quot;&gt;100&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;
                &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;has_sent_notification&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;str&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;current_timestamp&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;True&lt;/span&gt;
            
        &lt;span class=&quot;k&quot;&gt;elif&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;e&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;trade&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;c1&quot;&gt;# å®æ—¶æˆäº¤ä¿¡æ¯
&lt;/span&gt;            &lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;p&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;platform&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_platform&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;symbol&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;action&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;  &lt;span class=&quot;n&quot;&gt;ORDER_ACTION_SELL&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;m&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ORDER_ACTION_BUY&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;price&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;p&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;quantity&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;q&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;),&lt;/span&gt;
                &lt;span class=&quot;s&quot;&gt;&quot;timestamp&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;data&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;T&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
            &lt;span class=&quot;p&quot;&gt;}&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;info&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;symbol:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;trade:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trade&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;logger&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;error&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;event error! msg:&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;msg&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;caller&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;def&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;_symbol_to_channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel_type&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;ticker&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;):&lt;/span&gt;
        &lt;span class=&quot;s&quot;&gt;&quot;&quot;&quot; symbolè½¬æ¢åˆ°channel
        @param symbol symbolåå­—
        @param channel_type é¢‘é“ç±»å‹ kline Kçº¿ / ticker è¡Œæƒ…
        &quot;&quot;&quot;&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;{x}@{y}&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;format&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;x&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;replace&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;&quot;&quot;&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;lower&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(),&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;y&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;channel_type&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
        &lt;span class=&quot;bp&quot;&gt;self&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;_c_to_s&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;]&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;symbol&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;channel&lt;/span&gt;


&lt;span class=&quot;k&quot;&gt;if&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;__name__&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;s&quot;&gt;'__main__'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;:&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;binance_websocket&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Binance&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;to_wechat_id&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;'æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹'&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;asyncio&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;get_event_loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
    &lt;span class=&quot;c1&quot;&gt;# loop.call_later(2, heartbeat.ticker)
&lt;/span&gt;    &lt;span class=&quot;n&quot;&gt;loop&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;run_forever&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;è‡³æ­¤æˆ‘ä»¬çš„åŠ å¯†è´§å¸æ³¢åŠ¨æé†’æœºå™¨äººåŸºæœ¬æ¡†æ¶å·²ç»æ­å¥½ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯ï¼Œå¤§å®¶å¯ä»¥é€šè¿‡æ­é…kçº¿äº‹ä»¶ï¼Œtradeäº‹ä»¶å’Œorderbookäº‹ä»¶å½¢æˆæ–°çš„ä¿¡å·æé†’ï¼Œä¹Ÿå¯ä»¥åšå„ç§é‡åŒ–äº¤æ˜“æé†’ã€‚&lt;/p&gt;

&lt;h2 id=&quot;è¿è¡Œæ•ˆæœ&quot;&gt;è¿è¡Œæ•ˆæœ&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/03-wechaty-cryptocurrency-websocket/result.jpg&quot; alt=&quot;æ•ˆæœ&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;æ„Ÿè°¢&quot;&gt;æ„Ÿè°¢&lt;/h2&gt;

&lt;p&gt;åœ¨æœ€åæˆ‘ä»¬è¦æ„Ÿè°¢æ‰€æœ‰ä¸ºæˆ‘ä»¬æä¾›å·¥å…·å’ŒæœåŠ¡çš„å›¢é˜Ÿå’Œä¸ªäººã€‚ç‰¹åˆ«æ„Ÿè°¢å¼€æºé¡¹ç›®&lt;a href=&quot;https://github.com/wechaty/wechaty&quot;&gt;Wechaty&lt;/a&gt;å›¢é˜Ÿå’Œå…è´¹æä¾›æœåŠ¡çš„padLocalå›¢é˜Ÿã€‚&lt;/p&gt;</content><author><name>r-hou</name></author><category term="project" /><category term="python" /><category term="cryptocurrency" /><category term="binance" /><category term="devops" /><summary type="html"></summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/03-wechaty-cryptocurrency-websocket/wechaty-btc.jpg" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/03-wechaty-cryptocurrency-websocket/wechaty-btc.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">RCS Messaging Chatbot</title><link href="https://wechaty.js.org/2021/03/27/rcs-messaging-chatbot/" rel="alternate" type="text/html" title="RCS Messaging Chatbot" /><published>2021-03-27T00:00:00+00:00</published><updated>2021-03-27T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/03/27/rcs-messaging-chatbot</id><content type="html" xml:base="https://wechaty.js.org/2021/03/27/rcs-messaging-chatbot/">&lt;blockquote&gt;
  &lt;p&gt;Rich Communication Services (RCS) is a communication protocol between mobile-telephone carriers and between phone and carrier, aiming at replacing SMS messages with a text-message system that is richer, provides phonebook polling (for service discovery), and can transmit in-call multimedia. It is part of the broader IP Multimedia Subsystem.
  It is also marketed as Advanced Messaging, Chat, joyn, SMSoIP, Message+, and SMS+.
  â€” &lt;a href=&quot;https://en.wikipedia.org/wiki/Rich_Communication_Services&quot;&gt;Wikipedia&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In China, the telecom operators call the RCS a &lt;strong&gt;5G Chatbot&lt;/strong&gt;. (See: &lt;a href=&quot;https://www.gsma.com/futurenetworks/latest-news/china-operators-make-major-rcs-commitment-whitepaper/&quot;&gt;Chinese operators make major RCS commitment: Whitepaper, April 9, 2020&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/03-rcs-messaging-chatbot/rcs-screen.png&quot; alt=&quot;RCS business messaging&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Source: &lt;a href=&quot;https://nativemsg.com/blog/what-is-rcs-messaging-rich-communication-services-and-chatbots/&quot;&gt;What is RCS Messaging? Rich Communication Services and Chatbots&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;internet-company&quot;&gt;Internet Company&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://jibe.google.com/business-messaging/&quot;&gt;Google Jibe - Whatâ€™s possible with RCS?&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://botsociety.io/rcs-messaging&quot;&gt;BotSociety - RCS Messaging design&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;china-unicom&quot;&gt;China Unicom&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;&lt;a href=&quot;https://mp.weixin.qq.com/s/D2HIweu1qNem3zoQjhNV-w&quot;&gt;è”é€šåœ¨çº¿ - Chatbot åˆ›æ–°å¼€å‘å¤§èµ›æ¥å•¦&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.5g-msg.com/&quot;&gt;ä¸­è®¯é‚®ç”µè®¾è®¡é™¢ - ç¡¬æ ¸æ¡ƒ5Gæ¶ˆæ¯å¼€å‘è€…ç¤¾åŒº&lt;/a&gt;
    &lt;ol&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.5g-msg.com/static/upload/videos/fbh2020-11/02.mp4&quot;&gt;5G æ¶ˆæ¯å¼€å‘è€…å‘å¸ƒä¼šä¸­è®¯é™¢æ€»ç»ç†è‡´è¾&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.5g-msg.com/static/upload/videos/fbh2020-11/05.mp4&quot;&gt;ä¸­è®¯é™¢ï¼šä»‹ç»ç¡¬æ ¸æ¡ƒç¤¾åŒº&lt;/a&gt;&lt;/li&gt;
      &lt;li&gt;&lt;a href=&quot;https://www.5g-msg.com/static/upload/videos/fbh2020-11/09.mp4&quot;&gt;æ¢¦ç½‘ï¼š5Gæ¶ˆæ¯æ—¶ä»£CSPè½¬å‹ä¹‹è·¯&lt;/a&gt;&lt;/li&gt;
    &lt;/ol&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;blockquote&gt;
  &lt;p&gt;Source: &lt;a href=&quot;https://www.5g-msg.com/#/conference&quot;&gt;ç¡¬æ ¸æ¡ƒç¤¾åŒºå‘å¸ƒä¼š&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;case-study&quot;&gt;Case Study&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=obCyEvfKmxc&quot;&gt;RCS Messaging: Porsche Recruitment Chatbot from BOTfriends, GSMA Mobile World Congress 2019 (MWC19) in Barcelona, Oct 8, 2019&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;https://botfriends.de/en/&quot;&gt;https://botfriends.de/en/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=xjQPH17AP6k&quot;&gt;Cbot RCS Chatbot Improves User Experience of Banking Clients, GSMA Mobile World Congress 2019 (MWC19) in Barcelona, Jun 25, 2019&lt;/a&gt;
    &lt;ul&gt;
      &lt;li&gt;&lt;a href=&quot;http://www.cbot.ai/&quot;&gt;http://www.cbot.ai/&lt;/a&gt;&lt;/li&gt;
    &lt;/ul&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h2&gt;

&lt;p&gt;What Iâ€™m thinking about is, if we build a Wechaty Puppet RCS, then our chatbot will be able to run both on the WeChat and the RCS without modify any code! Hereâ€™s the Wechaty Puppet RCS Wishlist: &lt;a href=&quot;https://github.com/wechaty/wishlist/issues/53&quot;&gt;Enable RCS Support for Wechaty wechaty/wishlist#53&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;credit&quot;&gt;Credit&lt;/h2&gt;

&lt;p&gt;Teaser image credit &lt;a href=&quot;https://www.youtube.com/watch?v=xjQPH17AP6k&quot;&gt;https://www.youtube.com/watch?v=xjQPH17AP6k&lt;/a&gt;&lt;/p&gt;</content><author><name>huan</name></author><category term="article" /><category term="news" /><category term="rcs" /><summary type="html">Rich Communication Services (RCS) is a communication protocol between mobile-telephone carriers and between phone and carrier, aiming at replacing SMS messages with a text-message system that is richer, provides phonebook polling (for service discovery), and can transmit in-call multimedia. It is part of the broader IP Multimedia Subsystem. It is also marketed as Advanced Messaging, Chat, joyn, SMSoIP, Message+, and SMS+. â€” Wikipedia</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/03-rcs-messaging-chatbot/rcs-bot.jpg" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/03-rcs-messaging-chatbot/rcs-bot.jpg" xmlns:media="http://search.yahoo.com/mrss/" /></entry><entry><title type="html">Applying the documentation system to Wechaty docs</title><link href="https://wechaty.js.org/2021/03/25/google-season-of-docs-documentation-system/" rel="alternate" type="text/html" title="Applying the documentation system to Wechaty docs" /><published>2021-03-25T00:00:00+00:00</published><updated>2021-03-25T00:00:00+00:00</updated><id>https://wechaty.js.org/2021/03/25/google-season-of-docs-documentation-system</id><content type="html" xml:base="https://wechaty.js.org/2021/03/25/google-season-of-docs-documentation-system/">&lt;p&gt;This year, Wechaty organization is applying the &lt;a href=&quot;https://developers.google.com/season-of-docs&quot;&gt;Google Season of Docs&lt;/a&gt; program because we want to improve our documentation for the community.&lt;/p&gt;

&lt;p&gt;When Iâ€™m reading &lt;a href=&quot;https://developers.google.com/season-of-docs/docs/project-ideas&quot;&gt;Google Season of Docs - Project Ideas&lt;/a&gt;, I found this great talk: &lt;a href=&quot;https://2017.pycon-au.org/schedule/presentation/15/&quot;&gt;What nobody tells you about documentation, Daniele Procida, 2017, PyCon AU&lt;/a&gt;, which techs me &lt;strong&gt;&lt;a href=&quot;https://documentation.divio.com/&quot;&gt;The Grand Unified Theory of Documentation&lt;/a&gt;&lt;/strong&gt;:&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;There is a secret that needs to be understood
  in order to write good software documentation:
  there isnâ€™t one thing called documentation, there are four.&lt;/p&gt;

  &lt;p&gt;They are: tutorials, how-to guides, technical references, and explanations.
  They represent four different purposes or functions and
  require four different approaches to their creation.
  Understanding the implications of this will
  help improve most documentation - often immensely.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;what-nobody-tells-you-about-documentation&quot;&gt;What nobody tells you about documentation&lt;/h2&gt;

&lt;p&gt;In the Danieleâ€™s 30 minutes talk video, I decided to follow his principle to refactor our Wechaty Documentation website.&lt;/p&gt;

&lt;div style=&quot;
    position: relative;
    padding-bottom: 56.25%;
    padding-top:30px;
    height:0;
    overflow:hidden;
&quot;&gt;
  &lt;iframe src=&quot;https://www.youtube.com/embed/t4vKPhjcMZg&quot; allowfullscreen=&quot;&quot; webkitallowfullscreen=&quot;&quot; frameborder=&quot;0&quot; style=&quot;
      position: absolute;
      top:0;
      left:0;
      width:100%;
      height:100%;
    &quot;&gt;
&lt;/iframe&gt;

&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;&lt;a href=&quot;https://2017.pycon-au.org/schedule/presentation/15/&quot;&gt;What nobody tells you about documentation, Daniele Procida, 2017, PyCon AU&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;In the above video, Daniele â€œ&lt;em&gt;using real-life examples Iâ€™ll draw out the key functions of documentation, and how they map onto different ways of writing it. Putting this into practice is simple when armed with some basic guidelines. The benefits are huge, and available with a minimum of effort.&lt;/em&gt;â€ (&lt;a href=&quot;https://2017.pycon-au.org/schedule/presentation/15/&quot;&gt;link&lt;/a&gt;)&lt;/p&gt;

&lt;p&gt;The most important concept is the following diagram:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/03-google-season-of-docs-documentation-system/doc-sys-overview.png&quot; alt=&quot;The Documentation System&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Credit: &lt;a href=&quot;https://documentation.divio.com/&quot;&gt;Documentation System&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;By following the above concepts, I re-structured our docs site by a better understanding of what Wechaty documentation should be like, and also great help me to write a better GSoD proposal for submitting to Google.&lt;/p&gt;

&lt;h2 id=&quot;the-good-docs-project&quot;&gt;The Good Docs Project&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://thegooddocsproject.dev&quot;&gt;The Good Docs Project&lt;/a&gt; is also a great project with huge helps.&lt;/p&gt;

&lt;p&gt;The goal of the Good Docs Project is to improve open source software documentation by providing high quality templates and writing instructions to the open source community and beyond.&lt;/p&gt;

&lt;p&gt;The following diagram illustrated the lifecycle of the documentation:&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/2021/03-google-season-of-docs-documentation-system/doctypes.png&quot; alt=&quot;The Good Docs Project&quot; /&gt;&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;Each document type serves a different purpose and has differing requirements
  â€” &lt;a href=&quot;https://thegooddocsproject.dev&quot;&gt;The Good Docs Project&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;

&lt;h2 id=&quot;updated-docs-site&quot;&gt;Updated docs site&lt;/h2&gt;

&lt;p&gt;&lt;a href=&quot;https://documentation.divio.com/&quot;&gt;&lt;img src=&quot;https://img.shields.io/badge/DIVIO-Documentation%20System-blue&quot; alt=&quot;DIVIO documentation system&quot; /&gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Please read our branding new docs site at &lt;a href=&quot;http://wechaty.js.org/docs/&quot;&gt;http://wechaty.js.org/docs/&lt;/a&gt; which following the concepts of documentation system!&lt;/p&gt;

&lt;h2 id=&quot;related-issues&quot;&gt;Related Issues&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;Follow the Documentation System from Daniele Procida &lt;a href=&quot;https://github.com/wechaty/wechaty.js.org/issues/704&quot;&gt;#704&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Google Season of Docs Application &lt;a href=&quot;https://github.com/wechaty/summer-of-wechaty/issues/72&quot;&gt;#72&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</content><author><name>huan</name></author><category term="announcement" /><category term="gsod" /><category term="docs" /><category term="news" /><category term="sticky" /><category term="documentation" /><summary type="html">This year, Wechaty organization is applying the Google Season of Docs program because we want to improve our documentation for the community.</summary><media:thumbnail xmlns:media="http://search.yahoo.com/mrss/" url="https://wechaty.js.org/assets/2021/03-google-season-of-docs-documentation-system/doc-sys-overview.png" /><media:content medium="image" url="https://wechaty.js.org/assets/2021/03-google-season-of-docs-documentation-system/doc-sys-overview.png" xmlns:media="http://search.yahoo.com/mrss/" /></entry></feed>